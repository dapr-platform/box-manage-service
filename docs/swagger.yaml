basePath: /swagger/box-manage-service
definitions:
  controllers.APIResponse:
    properties:
      code:
        example: 200
        type: integer
      data: {}
      message:
        example: 操作成功
        type: string
      timestamp:
        example: "2025-01-26T12:00:00Z"
        type: string
    type: object
  controllers.AddBoxRequest:
    properties:
      description:
        example: 边缘AI推理盒子
        type: string
      ip_address:
        example: 192.168.1.100
        type: string
      location:
        example: 机房A-机柜01
        type: string
      name:
        example: AI-Box-001
        type: string
      port:
        example: 9000
        maximum: 65535
        minimum: 1
        type: integer
      tags:
        example:
        - gpu
        - high-performance
        - edge
        items:
          type: string
        type: array
    required:
    - ip_address
    - name
    - port
    type: object
  controllers.AllMetricsTopNResponse:
    description: 所有主要指标的TopN排名结果
    properties:
      cpu_usage:
        $ref: '#/definitions/controllers.TopNMetricsResponse'
      load:
        $ref: '#/definitions/controllers.TopNMetricsResponse'
      memory_usage:
        $ref: '#/definitions/controllers.TopNMetricsResponse'
      temperature:
        $ref: '#/definitions/controllers.TopNMetricsResponse'
      timestamp:
        type: string
      tpu_usage:
        $ref: '#/definitions/controllers.TopNMetricsResponse'
    type: object
  controllers.AutoScheduleResultResponse:
    description: 自动调度执行结果
    properties:
      details:
        items:
          $ref: '#/definitions/service.TaskScheduleResult'
        type: array
      duration_ms:
        type: integer
      errors:
        items:
          type: string
        type: array
      failed_tasks:
        type: integer
      policy_used:
        type: string
      scheduled_tasks:
        type: integer
      skipped_tasks:
        type: integer
      total_tasks:
        type: integer
    type: object
  controllers.AutoSchedulerStatusResponse:
    description: 自动调度器状态信息
    properties:
      active_policies:
        type: integer
      available_boxes:
        type: integer
      is_running:
        type: boolean
      last_error:
        type: string
      last_schedule_at:
        type: string
      pending_tasks:
        type: integer
      schedule_interval_sec:
        type: integer
      started_at:
        type: string
      total_failed:
        type: integer
      total_scheduled:
        type: integer
    type: object
  controllers.BatchDeployRequest:
    properties:
      box_ids:
        items:
          type: integer
        type: array
      task_ids:
        items:
          type: string
        type: array
    required:
    - box_ids
    - task_ids
    type: object
  controllers.BatchDeploymentRequest:
    properties:
      auto_start:
        type: boolean
      deployment_config:
        $ref: '#/definitions/models.DeploymentConfig'
      target_box_ids:
        items:
          type: integer
        minItems: 1
        type: array
      task_ids:
        items:
          type: integer
        minItems: 1
        type: array
    required:
    - target_box_ids
    - task_ids
    type: object
  controllers.BatchOperationRequest:
    properties:
      task_ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - task_ids
    type: object
  controllers.BatchOperationResponse:
    properties:
      failure_count:
        type: integer
      results:
        items:
          $ref: '#/definitions/controllers.BatchOperationResult'
        type: array
      success_count:
        type: integer
      total_tasks:
        type: integer
    type: object
  controllers.BatchOperationResult:
    properties:
      message:
        type: string
      new_status:
        type: string
      success:
        type: boolean
      task_id:
        type: string
    type: object
  controllers.BatchUpdateConfigRequest:
    properties:
      configs:
        additionalProperties: true
        description: 配置键值对
        type: object
    type: object
  controllers.BatchUpgradeRequest:
    properties:
      box_ids:
        items:
          type: integer
        type: array
      force:
        example: false
        type: boolean
      upgrade_package_id:
        example: 1
        type: integer
    required:
    - box_ids
    - upgrade_package_id
    type: object
  controllers.BatchUpgradeTaskResponse:
    properties:
      box_ids:
        items:
          type: integer
        type: array
      completed_at:
        type: string
      completed_boxes:
        type: integer
      created_at:
        type: string
      failed_boxes:
        type: integer
      force:
        type: boolean
      id:
        type: integer
      name:
        type: string
      program_file:
        type: string
      started_at:
        type: string
      status:
        $ref: '#/definitions/models.UpgradeStatus'
      total_boxes:
        type: integer
      version_to:
        type: string
    type: object
  controllers.BoxResourceUsage:
    description: 盒子资源使用统计
    properties:
      offline:
        type: integer
      online:
        type: integer
      total:
        type: integer
    type: object
  controllers.BoxResourcesAggregation:
    description: 盒子资源使用情况聚合数据
    properties:
      avg_cpu_usage:
        description: 平均 CPU 使用率
        type: number
      avg_memory_usage:
        description: 平均内存使用率
        type: number
      avg_temperature:
        description: 平均温度
        type: number
      avg_tpu_usage:
        description: 平均 TPU 使用率
        type: number
      total_memory_gb:
        description: 总内存(GB)
        type: number
    type: object
  controllers.BoxResponse:
    properties:
      api_key:
        description: 设备认证信息（从心跳数据获取）
        type: string
      build_time:
        description: 盒子软件构建时间
        type: string
      can_accept_task:
        description: 是否可以接受新任务
        type: boolean
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 关联字段
        type: integer
      current_tasks:
        description: 当前运行的任务
        items:
          $ref: '#/definitions/controllers.BoxTaskInfo'
        type: array
      description:
        type: string
      device_fingerprint:
        description: 设备指纹
        type: string
      edition:
        description: 版本类型（如commercial）
        type: string
      hardware:
        $ref: '#/definitions/models.Hardware'
      heartbeats:
        items:
          $ref: '#/definitions/models.BoxHeartbeat'
        type: array
      id:
        description: 主键ID
        example: 1
        type: integer
      ip_address:
        type: string
      is_license_valid:
        description: 许可证是否有效
        type: boolean
      is_online:
        description: 计算字段：是否在线
        type: boolean
      last_heartbeat:
        description: 监控相关字段
        type: string
      license_id:
        description: 许可证ID
        type: string
      location:
        type: string
      meta:
        allOf:
        - $ref: '#/definitions/models.BoxMeta'
        description: 设备能力信息（从/api/v1/meta获取）
      name:
        type: string
      port:
        maximum: 65535
        minimum: 1
        type: integer
      resources:
        $ref: '#/definitions/models.Resources'
      status:
        $ref: '#/definitions/models.BoxStatus'
      tags:
        description: 盒子标签，用于任务调度匹配
        items:
          type: string
        type: array
      task_count:
        description: 任务总数
        type: integer
      tasks:
        description: 关联关系
        items:
          $ref: '#/definitions/models.Task'
        type: array
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upgrades:
        description: 注意：Models 关联通过 BoxModel 表在业务层处理，不在这里定义 GORM 关联
        items:
          $ref: '#/definitions/models.UpgradeTask'
        type: array
      version:
        description: 盒子软件版本
        type: string
    required:
    - ip_address
    - name
    - status
    type: object
  controllers.BoxScoreResponse:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      has_capacity:
        type: boolean
      is_online:
        type: boolean
      reasons:
        items:
          type: string
        type: array
      score:
        type: number
      tag_matches:
        type: integer
    type: object
  controllers.BoxTaskInfo:
    properties:
      auto_start:
        type: boolean
      dev_id:
        type: string
      inference_tasks_count:
        type: integer
      rtsp_url:
        type: string
      status:
        type: string
      task_id:
        type: string
    type: object
  controllers.BoxesOverview:
    description: 盒子状态概览数据
    properties:
      cpu_usage:
        description: 平均 CPU 使用率
        type: number
      distribution:
        additionalProperties:
          type: integer
        description: 按硬件类型分布
        type: object
      offline:
        type: integer
      online:
        type: integer
      resources:
        $ref: '#/definitions/controllers.BoxResourcesAggregation'
      total:
        type: integer
      tpu_usage:
        description: 平均 TPU 使用率
        type: number
    type: object
  controllers.ConversionTasksOverview:
    description: 模型转换任务概览数据
    properties:
      completed:
        type: integer
      failed:
        type: integer
      running:
        type: integer
      success_rate:
        type: number
      total:
        type: integer
    type: object
  controllers.CreateDeploymentTaskRequest:
    properties:
      auto_start:
        description: 是否创建后自动开始
        type: boolean
      deployment_config:
        $ref: '#/definitions/models.DeploymentConfig'
      description:
        type: string
      name:
        type: string
      priority:
        type: integer
      target_box_ids:
        items:
          type: integer
        minItems: 1
        type: array
      task_ids:
        items:
          type: integer
        minItems: 1
        type: array
    required:
    - name
    - target_box_ids
    - task_ids
    type: object
  controllers.CreateModelDeploymentRequest:
    properties:
      box_ids:
        description: 目标盒子ID列表
        items:
          type: integer
        type: array
      converted_model_ids:
        description: 转换后模型ID列表
        items:
          type: integer
        type: array
      name:
        description: 任务名称
        type: string
    required:
    - box_ids
    - converted_model_ids
    - name
    type: object
  controllers.CreateSchedulePolicyRequest:
    description: 创建调度策略请求参数
    properties:
      description:
        type: string
      execution_config:
        $ref: '#/definitions/models.ExecutionConfig'
      is_enabled:
        type: boolean
      name:
        type: string
      policy_type:
        $ref: '#/definitions/models.SchedulePolicyType'
      priority:
        type: integer
      schedule_rules:
        $ref: '#/definitions/models.ScheduleRules'
      trigger_conditions:
        $ref: '#/definitions/models.TriggerConditions'
    required:
    - name
    - policy_type
    type: object
  controllers.CreateTaskRequest:
    properties:
      affinityTags:
        description: 亲和性标签
        items:
          type: string
        type: array
      autoSchedule:
        description: 自动调度
        type: boolean
      autoStart:
        type: boolean
      description:
        description: 任务描述
        type: string
      inferenceTasks:
        items:
          $ref: '#/definitions/models.InferenceTask'
        type: array
      maxRetries:
        description: 最大重试次数
        type: integer
      name:
        description: 任务名称
        type: string
      outputSettings:
        $ref: '#/definitions/models.OutputSettings'
      priority:
        type: integer
      rois:
        items:
          $ref: '#/definitions/models.ROIConfig'
        type: array
      scheduledAt:
        description: 计划执行时间
        type: string
      skipFrame:
        type: integer
      tags:
        items:
          type: string
        type: array
      taskId:
        type: string
      taskLevelForwardInfos:
        description: 任务级别转发配置
        items:
          $ref: '#/definitions/models.ForwardInfo'
        type: array
      useROItoInference:
        type: boolean
      videoSourceId:
        description: 视频源ID
        type: integer
    required:
    - inferenceTasks
    - taskId
    - videoSourceId
    type: object
  controllers.DeployTaskRequest:
    properties:
      boxId:
        type: integer
    required:
    - boxId
    type: object
  controllers.DiscoverBoxesRequest:
    properties:
      ip_range:
        example: 192.168.1.1-192.168.1.254
        type: string
      port:
        example: 9000
        type: integer
    required:
    - ip_range
    - port
    type: object
  controllers.DiscoverBoxesResponse:
    properties:
      ip_range:
        description: 扫描范围
        type: string
      port:
        description: 扫描端口
        type: integer
      scan_id:
        description: 扫描任务ID
        type: string
      start_time:
        description: 开始时间
        type: string
      status:
        description: 扫描状态：started
        type: string
    type: object
  controllers.ErrorResponse:
    properties:
      code:
        example: 400
        type: integer
      error:
        example: 详细错误信息
        type: string
      message:
        example: 参数错误
        type: string
      timestamp:
        example: "2025-01-26T12:00:00Z"
        type: string
    type: object
  controllers.ExecutorPerformance:
    description: 任务执行器性能数据
    properties:
      active_sessions:
        type: integer
      avg_execution_time:
        type: string
      failed_executions:
        type: integer
      queue_length:
        type: integer
      successful_executions:
        type: integer
      total_executions:
        type: integer
      worker_count:
        type: integer
    type: object
  controllers.ExtractTasksOverview:
    description: 视频抽帧任务概览数据
    properties:
      completed:
        type: integer
      failed:
        type: integer
      running:
        type: integer
      total:
        type: integer
    type: object
  controllers.HealthCheckResponse:
    description: 系统健康检查结果
    properties:
      services:
        additionalProperties:
          type: boolean
        type: object
      status:
        type: string
      timestamp:
        type: string
      uptime:
        type: string
    type: object
  controllers.HealthResponse:
    properties:
      service:
        example: box-manage-service
        type: string
      status:
        example: ok
        type: string
      timestamp:
        example: "2024-01-01T00:00:00Z"
        type: string
      version:
        example: 1.0.0
        type: string
    type: object
  controllers.LogStatisticsResponse:
    description: 日志统计信息响应
    properties:
      statistics: {}
      time_range:
        $ref: '#/definitions/controllers.TimeRangeData'
    type: object
  controllers.ModelsOverview:
    description: 模型管理概览数据
    properties:
      conversion_tasks:
        $ref: '#/definitions/controllers.ConversionTasksOverview'
      converted:
        type: integer
      deployments:
        type: integer
      original:
        type: integer
      storage_usage_mb:
        type: integer
    type: object
  controllers.MonitoringMetricsResponse:
    description: 系统监控的详细指标数据
    properties:
      active_goroutines:
        type: integer
      average_response_time_ms:
        type: integer
      failed_polls:
        type: integer
      failed_tasks:
        type: integer
      last_update_time:
        type: string
      memory_usage_mb:
        type: integer
      monitored_tasks:
        type: integer
      offline_boxes:
        type: integer
      online_boxes:
        type: integer
      running_tasks:
        type: integer
      successful_polls:
        type: integer
      total_boxes:
        type: integer
      total_polls:
        type: integer
    type: object
  controllers.PaginatedResponse:
    properties:
      code:
        example: 200
        type: integer
      data: {}
      message:
        example: 操作成功
        type: string
      page:
        example: 1
        type: integer
      size:
        example: 10
        type: integer
      timestamp:
        example: "2025-01-26T12:00:00Z"
        type: string
      total:
        example: 100
        type: integer
    type: object
  controllers.PerformanceMetricsResponse:
    description: 系统性能相关的指标数据
    properties:
      executor:
        $ref: '#/definitions/controllers.ExecutorPerformance'
      system:
        $ref: '#/definitions/controllers.SystemPerformanceData'
      timestamp:
        type: string
    type: object
  controllers.RecordTasksOverview:
    description: 视频录制任务概览数据
    properties:
      completed:
        type: integer
      failed:
        type: integer
      recording:
        type: integer
      total:
        type: integer
    type: object
  controllers.ResourceUsageResponse:
    description: 系统资源使用情况统计
    properties:
      active_goroutines:
        type: integer
      average_response_time:
        type: integer
      boxes:
        $ref: '#/definitions/controllers.BoxResourceUsage'
      memory_usage_mb:
        type: integer
      tasks:
        $ref: '#/definitions/controllers.TaskResourceUsage'
      timestamp:
        type: string
    type: object
  controllers.RollbackRequest:
    properties:
      target_upgrade_package_id:
        example: 1
        type: integer
    required:
    - target_upgrade_package_id
    type: object
  controllers.ScheduleAllResponse:
    properties:
      failed_tasks:
        type: integer
      scheduled_tasks:
        type: integer
      summary:
        additionalProperties:
          type: integer
        type: object
      task_results:
        items:
          $ref: '#/definitions/controllers.ScheduleTaskResponse'
        type: array
      total_tasks:
        type: integer
    type: object
  controllers.SchedulePolicyListResponse:
    description: 调度策略列表响应
    properties:
      items:
        items:
          $ref: '#/definitions/controllers.SchedulePolicyResponse'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  controllers.SchedulePolicyResponse:
    description: 调度策略数据
    properties:
      created_at:
        type: string
      description:
        type: string
      execution_config:
        $ref: '#/definitions/models.ExecutionConfig'
      id:
        type: integer
      is_enabled:
        type: boolean
      name:
        type: string
      policy_type:
        $ref: '#/definitions/models.SchedulePolicyType'
      priority:
        type: integer
      schedule_rules:
        $ref: '#/definitions/models.ScheduleRules'
      trigger_conditions:
        $ref: '#/definitions/models.TriggerConditions'
      updated_at:
        type: string
    type: object
  controllers.ScheduleTaskRequest:
    properties:
      box_id:
        description: 可选：指定目标盒子
        type: integer
    type: object
  controllers.ScheduleTaskResponse:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      candidates:
        items:
          $ref: '#/definitions/service.BoxScore'
        type: array
      reason:
        type: string
      score:
        type: number
      success:
        type: boolean
      task_id:
        type: integer
      task_name:
        type: string
    type: object
  controllers.SchedulerStatusResponse:
    properties:
      active_sessions:
        type: integer
      avg_execution_time:
        type: string
      failed_executions:
        type: integer
      is_running:
        type: boolean
      queue_length:
        type: integer
      successful_executions:
        type: integer
      total_executions:
        type: integer
      worker_count:
        type: integer
    type: object
  controllers.ServicesStatus:
    description: 各个服务的运行状态
    properties:
      box_monitoring:
        type: boolean
      sse_connections:
        type: integer
      task_executor:
        type: boolean
      video_monitoring:
        type: boolean
    type: object
  controllers.SystemOverviewResponse:
    description: 系统概览响应数据结构
    properties:
      boxes:
        $ref: '#/definitions/controllers.BoxesOverview'
      models:
        $ref: '#/definitions/controllers.ModelsOverview'
      services:
        $ref: '#/definitions/controllers.ServicesStatus'
      system:
        $ref: '#/definitions/controllers.SystemPerformance'
      tasks:
        $ref: '#/definitions/controllers.TasksOverview'
      timestamp:
        type: string
      videos:
        $ref: '#/definitions/controllers.VideosOverview'
    type: object
  controllers.SystemPerformance:
    description: 系统性能指标数据
    properties:
      active_goroutines:
        type: integer
      average_response_time_ms:
        type: integer
      cpu_usage_percent:
        type: number
      failed_polls:
        type: integer
      memory_usage_mb:
        type: integer
      successful_polls:
        type: integer
      total_polls:
        type: integer
    type: object
  controllers.SystemPerformanceData:
    description: 系统性能数据
    properties:
      active_goroutines:
        type: integer
      average_response_time:
        type: integer
      failed_polls:
        type: integer
      memory_usage_mb:
        type: integer
      successful_polls:
        type: integer
      total_polls:
        type: integer
    type: object
  controllers.TaskMetricsResponse:
    description: 任务相关的统计指标
    properties:
      conversion_tasks: {}
      record_tasks: {}
      timestamp:
        type: string
    type: object
  controllers.TaskPerformanceOverview:
    description: 任务执行性能概览数据
    properties:
      avg_fps:
        type: number
      avg_latency_ms:
        type: number
      success_rate:
        type: number
      total_inference_count:
        type: integer
      total_processed_frames:
        type: integer
    type: object
  controllers.TaskResourceUsage:
    description: 任务资源使用统计
    properties:
      failed:
        type: integer
      monitored:
        type: integer
      running:
        type: integer
    type: object
  controllers.TaskResultsResponse:
    properties:
      duration:
        type: string
      error_message:
        type: string
      forward_failed:
        type: integer
      forward_success:
        type: integer
      inference_count:
        type: integer
      start_time:
        type: string
      statistics:
        additionalProperties: true
        type: object
      status:
        type: string
      stop_time:
        type: string
      task_id:
        type: string
      total_frames:
        type: integer
    type: object
  controllers.TaskStatusResponse:
    properties:
      box_id:
        type: integer
      box_status:
        type: string
      error_message:
        type: string
      last_heartbeat:
        type: string
      max_retries:
        type: integer
      progress:
        type: number
      retry_count:
        type: integer
      start_time:
        type: string
      status:
        type: string
      stop_time:
        type: string
      task_id:
        type: string
    type: object
  controllers.TasksOverview:
    description: 任务执行状态概览数据
    properties:
      completed:
        type: integer
      failed:
        type: integer
      pending:
        type: integer
      performance:
        $ref: '#/definitions/controllers.TaskPerformanceOverview'
      running:
        type: integer
      total:
        type: integer
    type: object
  controllers.TimeRangeData:
    description: 时间范围数据
    properties:
      end_time:
        type: string
      start_time:
        type: string
    type: object
  controllers.TopNMetricsItem:
    description: TopN指标查询结果项
    properties:
      box_id:
        description: 盒子ID
        type: integer
      box_name:
        description: 盒子名称
        type: string
      ip_address:
        description: IP地址
        type: string
      metric_name:
        description: 指标名称
        type: string
      metric_value:
        description: 指标值
        type: number
      status:
        description: 状态
        type: string
      unit:
        description: 单位
        type: string
    type: object
  controllers.TopNMetricsResponse:
    description: TopN指标查询结果
    properties:
      items:
        description: 指标项列表
        items:
          $ref: '#/definitions/controllers.TopNMetricsItem'
        type: array
      metric_name:
        description: 指标名称
        type: string
      order:
        description: 排序方式
        type: string
      timestamp:
        description: 查询时间
        type: string
      top_n:
        description: 返回数量
        type: integer
    type: object
  controllers.TriggerScheduleRequest:
    description: 手动触发调度请求参数
    properties:
      policy_id:
        description: 可选：指定使用的策略ID
        type: integer
    type: object
  controllers.UpdateBoxRequest:
    properties:
      description:
        example: 更新的盒子描述
        type: string
      location:
        example: 机房B-机柜02
        type: string
      name:
        example: AI-Box-001-Updated
        type: string
      tags:
        example:
        - gpu
        - high-performance
        - updated
        items:
          type: string
        type: array
    type: object
  controllers.UpdateConfigByTypeRequest:
    properties:
      values:
        additionalProperties: true
        description: 配置键值对
        type: object
    type: object
  controllers.UpdateConfigRequest:
    properties:
      value:
        description: 配置值
    type: object
  controllers.UpdateSchedulePolicyRequest:
    description: 更新调度策略请求参数
    properties:
      description:
        type: string
      execution_config:
        $ref: '#/definitions/models.ExecutionConfig'
      is_enabled:
        type: boolean
      name:
        type: string
      policy_type:
        $ref: '#/definitions/models.SchedulePolicyType'
      priority:
        type: integer
      schedule_rules:
        $ref: '#/definitions/models.ScheduleRules'
      trigger_conditions:
        $ref: '#/definitions/models.TriggerConditions'
    type: object
  controllers.UpdateTaskRequest:
    properties:
      affinityTags:
        description: 亲和性标签
        items:
          type: string
        type: array
      autoSchedule:
        description: 自动调度
        type: boolean
      autoStart:
        type: boolean
      description:
        description: 任务描述
        type: string
      inferenceTasks:
        items:
          $ref: '#/definitions/models.InferenceTask'
        type: array
      name:
        description: 任务名称
        type: string
      outputSettings:
        $ref: '#/definitions/models.OutputSettings'
      priority:
        type: integer
      rois:
        items:
          $ref: '#/definitions/models.ROIConfig'
        type: array
      skipFrame:
        type: integer
      tags:
        items:
          type: string
        type: array
      taskLevelForwardInfos:
        description: 任务级别转发配置
        items:
          $ref: '#/definitions/models.ForwardInfo'
        type: array
      useROItoInference:
        type: boolean
      videoSourceId:
        description: 视频源ID
        type: integer
    type: object
  controllers.UpgradeFileResponse:
    properties:
      checksum:
        type: string
      content_type:
        type: string
      download_url:
        type: string
      name:
        type: string
      size:
        type: integer
      type:
        $ref: '#/definitions/models.FileType'
      uploaded_at:
        type: string
    type: object
  controllers.UpgradePackageRequest:
    properties:
      description:
        type: string
      is_prerelease:
        type: boolean
      max_box_version:
        type: string
      min_box_version:
        type: string
      name:
        type: string
      release_notes:
        type: string
      type:
        $ref: '#/definitions/models.UpgradePackageType'
      version:
        type: string
    required:
    - name
    - type
    - version
    type: object
  controllers.UpgradePackageResponse:
    properties:
      checksum:
        type: string
      created_at:
        type: string
      description:
        type: string
      download_count:
        type: integer
      files:
        items:
          $ref: '#/definitions/controllers.UpgradeFileResponse'
        type: array
      id:
        type: integer
      is_prerelease:
        type: boolean
      max_box_version:
        type: string
      min_box_version:
        type: string
      name:
        type: string
      release_notes:
        type: string
      released_at:
        type: string
      released_by:
        type: integer
      status:
        $ref: '#/definitions/models.PackageStatus'
      total_size:
        type: integer
      type:
        $ref: '#/definitions/models.UpgradePackageType'
      updated_at:
        type: string
      upgrade_count:
        type: integer
      version:
        type: string
    type: object
  controllers.UpgradeRequest:
    properties:
      force:
        example: false
        type: boolean
      upgrade_package_id:
        example: 1
        type: integer
    required:
    - upgrade_package_id
    type: object
  controllers.UpgradeTaskResponse:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      can_rollback:
        type: boolean
      completed_at:
        type: string
      created_at:
        type: string
      error_message:
        type: string
      force:
        type: boolean
      id:
        type: integer
      name:
        type: string
      program_file:
        type: string
      progress:
        type: integer
      rollback_version:
        type: string
      started_at:
        type: string
      status:
        $ref: '#/definitions/models.UpgradeStatus'
      version_from:
        type: string
      version_to:
        type: string
    type: object
  controllers.VideosOverview:
    description: 视频处理概览数据
    properties:
      extract_tasks:
        $ref: '#/definitions/controllers.ExtractTasksOverview'
      files:
        type: integer
      monitoring:
        type: boolean
      record_tasks:
        $ref: '#/definitions/controllers.RecordTasksOverview'
      sources:
        type: integer
    type: object
  gorm.DeletedAt:
    properties:
      time:
        type: string
      valid:
        description: Valid is true if Time is not NULL
        type: boolean
    type: object
  models.AllSystemConfigs:
    properties:
      box:
        allOf:
        - $ref: '#/definitions/models.BoxConfigValues'
        description: 盒子管理配置
      conversion:
        allOf:
        - $ref: '#/definitions/models.ConversionConfigValues'
        description: 模型转换配置
      model:
        allOf:
        - $ref: '#/definitions/models.ModelConfigValues'
        description: 模型管理配置
      system:
        allOf:
        - $ref: '#/definitions/models.SystemConfigValues'
        description: 系统通用配置
      task:
        allOf:
        - $ref: '#/definitions/models.TaskConfigValues'
        description: 任务调度配置
      video:
        allOf:
        - $ref: '#/definitions/models.VideoConfigValues'
        description: 视频处理配置
    type: object
  models.BatchUpgradeTask:
    properties:
      box_ids:
        items:
          type: integer
        type: array
      completed_at:
        type: string
      completed_boxes:
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 创建者
        type: integer
      failed_boxes:
        type: integer
      force:
        type: boolean
      id:
        description: 主键ID
        example: 1
        type: integer
      name:
        type: string
      program_file:
        description: 兼容字段，逐步废弃
        type: string
      started_at:
        description: 时间相关
        type: string
      status:
        $ref: '#/definitions/models.UpgradeStatus'
      total_boxes:
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upgrade_package:
        allOf:
        - $ref: '#/definitions/models.UpgradePackage'
        description: 关联关系
      upgrade_package_id:
        description: 关联升级包
        type: integer
      upgrade_tasks:
        items:
          $ref: '#/definitions/models.UpgradeTask'
        type: array
      version_from:
        type: string
      version_to:
        type: string
    type: object
  models.Box:
    properties:
      api_key:
        description: 设备认证信息（从心跳数据获取）
        type: string
      build_time:
        description: 盒子软件构建时间
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 关联字段
        type: integer
      description:
        type: string
      device_fingerprint:
        description: 设备指纹
        type: string
      edition:
        description: 版本类型（如commercial）
        type: string
      hardware:
        $ref: '#/definitions/models.Hardware'
      heartbeats:
        items:
          $ref: '#/definitions/models.BoxHeartbeat'
        type: array
      id:
        description: 主键ID
        example: 1
        type: integer
      ip_address:
        type: string
      is_license_valid:
        description: 许可证是否有效
        type: boolean
      last_heartbeat:
        description: 监控相关字段
        type: string
      license_id:
        description: 许可证ID
        type: string
      location:
        type: string
      meta:
        allOf:
        - $ref: '#/definitions/models.BoxMeta'
        description: 设备能力信息（从/api/v1/meta获取）
      name:
        type: string
      port:
        maximum: 65535
        minimum: 1
        type: integer
      resources:
        $ref: '#/definitions/models.Resources'
      status:
        $ref: '#/definitions/models.BoxStatus'
      tags:
        description: 盒子标签，用于任务调度匹配
        items:
          type: string
        type: array
      tasks:
        description: 关联关系
        items:
          $ref: '#/definitions/models.Task'
        type: array
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upgrades:
        description: 注意：Models 关联通过 BoxModel 表在业务层处理，不在这里定义 GORM 关联
        items:
          $ref: '#/definitions/models.UpgradeTask'
        type: array
      version:
        description: 盒子软件版本
        type: string
    required:
    - ip_address
    - name
    - status
    type: object
  models.BoxConfigValues:
    properties:
      auto_offline_minutes:
        description: 自动离线判定时间（分钟），默认5
        type: integer
      discovery_scan_range:
        description: 发现扫描IP范围，如 ["192.168.1.1-192.168.1.254"]
        items:
          type: string
        type: array
      heartbeat_timeout_seconds:
        description: 心跳超时时间（秒），默认60
        type: integer
      max_concurrent_model_upload:
        description: 最大并发模型上传数，默认3
        type: integer
      monitoring_interval_seconds:
        description: 监控刷新间隔（秒），默认30
        type: integer
    type: object
  models.BoxHeartbeat:
    properties:
      box:
        allOf:
        - $ref: '#/definitions/models.Box'
        description: 关联关系
      box_id:
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      resources:
        $ref: '#/definitions/models.Resources'
      status:
        $ref: '#/definitions/models.BoxStatus'
      timestamp:
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
    type: object
  models.BoxHeartbeatRequest:
    properties:
      api_key:
        description: API密钥
        type: string
      device:
        allOf:
        - $ref: '#/definitions/models.HeartbeatDeviceInfo'
        description: 设备信息
      ip_address:
        description: IP地址（由服务端填充）
        type: string
      port:
        description: 服务端口
        type: integer
      service:
        description: 服务名称
        type: string
      system:
        allOf:
        - $ref: '#/definitions/models.HeartbeatSystemInfo'
        description: 系统信息
      tasks:
        allOf:
        - $ref: '#/definitions/models.HeartbeatTasksInfo'
        description: 任务信息
      timestamp:
        description: 时间戳（毫秒）
        type: integer
      version:
        description: 盒子软件版本
        type: string
    type: object
  models.BoxHeartbeatResponse:
    properties:
      box_id:
        description: 盒子ID
        type: integer
      message:
        description: 消息
        type: string
      success:
        description: 是否成功
        type: boolean
      sync_triggered:
        description: 是否触发了任务同步
        type: boolean
      tasks_to_sync:
        description: 需要同步的任务数
        type: integer
      timestamp:
        description: 响应时间戳
        type: integer
    type: object
  models.BoxMeta:
    properties:
      defaults:
        allOf:
        - $ref: '#/definitions/models.MetaDefaults'
        description: 默认配置
      file_limits:
        allOf:
        - $ref: '#/definitions/models.FileLimits'
        description: 文件限制
      inference_type_mapping:
        additionalProperties:
          type: string
        description: 推理类型映射
        type: object
      supported_hardware:
        description: 支持的硬件平台，如 ["BM1684", "BM1684X"]
        items:
          type: string
        type: array
      supported_types:
        description: 支持的模型类型，如 ["detection", "segmentation"]
        items:
          type: string
        type: array
      supported_versions:
        description: 支持的模型版本，如 ["yolov8"]
        items:
          type: string
        type: array
    type: object
  models.BoxStatus:
    enum:
    - online
    - offline
    - maintenance
    - error
    type: string
    x-enum-comments:
      BoxStatusError: 错误
      BoxStatusMaintenance: 维护中
      BoxStatusOffline: 离线
      BoxStatusOnline: 在线
    x-enum-descriptions:
    - 在线
    - 离线
    - 维护中
    - 错误
    x-enum-varnames:
    - BoxStatusOnline
    - BoxStatusOffline
    - BoxStatusMaintenance
    - BoxStatusError
  models.ConfigMetadata:
    properties:
      category:
        description: 分类
        type: string
      default_value:
        description: 默认值
      description:
        description: 描述
        type: string
      key:
        description: 配置键
        type: string
      name:
        description: 显示名称
        type: string
      required:
        description: 是否必填
        type: boolean
      type:
        description: 数据类型：string/int/bool/array
        type: string
      validation:
        description: 验证规则描述
        type: string
    type: object
  models.ConversionConfigValues:
    properties:
      default_timeout_hours:
        description: 默认转换超时（小时），默认2
        type: integer
      max_concurrent_tasks:
        description: 最大并发转换任务数，默认3
        type: integer
      quantization_types:
        description: 支持的量化类型列表
        items:
          type: string
        type: array
      target_chips:
        description: 支持的目标芯片列表
        items:
          type: string
        type: array
      yolo_versions:
        description: 支持的YOLO版本列表
        items:
          type: string
        type: array
    type: object
  models.ConversionParameters:
    properties:
      cache_dir:
        description: 缓存目录
        example: ""
        type: string
      custom_params:
        description: 自定义参数
        example: ""
        type: string
      enable_debug:
        description: 是否启用调试
        example: false
        type: boolean
      input_shape:
        description: 输入形状
        example:
        - 1
        - 3
        - 640
        - 640
        items:
          type: integer
        type: array
      model_format:
        description: 模型格式
        example: bmodel
        type: string
      quantization:
        description: 量化参数 (F16/F32)
        example: F16
        type: string
      target_chip:
        description: 目标芯片
        example: BM1684X
        type: string
      target_yolo_version:
        description: 目标YOLO版本，默认yolov8
        example: yolov8
        type: string
      work_dir:
        description: 工作目录
        example: ""
        type: string
    type: object
  models.ConversionTask:
    description: 模型转换任务，用于管理pt/onnx到bmodel的转换过程
    properties:
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 创建信息
        example: 1
        type: integer
      end_time:
        description: 结束时间
        example: "2025-01-28T12:30:00Z"
        type: string
      error_message:
        description: 错误信息
        example: ""
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      logs:
        description: 文件路径和日志
        example: |-
          转换开始...
          正在处理模型...
          转换完成
        type: string
      original_model:
        allOf:
        - $ref: '#/definitions/models.OriginalModel'
        description: 关联模型
      original_model_id:
        description: 原始模型ID
        example: 1
        type: integer
      output_path:
        description: 输出文件路径
        example: /data/models/converted/yolo-v5-bm1684x.bmodel
        type: string
      parameters:
        allOf:
        - $ref: '#/definitions/models.ConversionParameters'
        description: 转换参数
      progress:
        description: 进度 (0-100)
        example: 50
        type: integer
      start_time:
        description: 开始时间
        example: "2025-01-28T12:00:00Z"
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ConversionTaskStatus'
        description: 任务状态
        example: pending
      target_format:
        description: 目标格式
        example: bmodel
        type: string
      task_id:
        description: 任务标识
        example: conv_task_abc123
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
    type: object
  models.ConversionTaskStatus:
    enum:
    - pending
    - running
    - completed
    - failed
    type: string
    x-enum-comments:
      ConversionTaskStatusCompleted: 已完成
      ConversionTaskStatusFailed: 失败
      ConversionTaskStatusPending: 待处理
      ConversionTaskStatusRunning: 运行中
    x-enum-descriptions:
    - 待处理
    - 运行中
    - 已完成
    - 失败
    x-enum-varnames:
    - ConversionTaskStatusPending
    - ConversionTaskStatusRunning
    - ConversionTaskStatusCompleted
    - ConversionTaskStatusFailed
  models.ConvertedModel:
    description: 转换后模型数据结构，支持bmodel等转换后格式的完整管理
    properties:
      access_count:
        description: 访问控制和统计
        example: 50
        type: integer
      conversion_task_id:
        description: 关联转换任务ID
        example: conv_task_abc123
        type: string
      convert_params:
        description: 转换参数
        example: '{}'
        type: string
      converted_at:
        description: 转换完成时间
        example: "2025-01-28T12:00:00Z"
        type: string
      converted_path:
        description: 转换后文件路径（与FilePath相同，为了兼容数据库）
        example: /data/models/converted/yolo-v5-bm1684x.bmodel
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        description: 模型描述
        example: 转换为BM1684X芯片优化的YOLO v5模型
        type: string
      display_name:
        description: 显示名称
        example: YOLO v5 目标检测模型 (BM1684X)
        type: string
      download_count:
        description: 下载次数
        example: 10
        type: integer
      file_md5:
        description: 文件MD5校验和
        example: d41d8cd98f00b204e9800998ecf8427e
        type: string
      file_name:
        description: 文件信息
        example: yolo-v5-bm1684x.bmodel
        type: string
      file_path:
        description: 文件存储路径
        example: /data/models/converted/yolo-v5-bm1684x.bmodel
        type: string
      file_sha256:
        description: 文件SHA256校验和
        example: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
        type: string
      file_size:
        description: 文件大小（字节）
        example: 52428800
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      input_channels:
        description: 输入通道数
        example: 3
        type: integer
      input_height:
        description: 输入高度
        example: 640
        type: integer
      input_width:
        description: 输入宽度
        example: 640
        type: integer
      last_accessed_at:
        description: 最后访问时间
        example: "2025-01-28T12:00:00Z"
        type: string
      model_key:
        description: '模型标识 - 格式: type-targetyoloVersion-targetChip-name'
        example: detection-yolov8-bm1684x-cow_head
        type: string
      name:
        description: 基本信息
        example: yolo-v5-bm1684x
        type: string
      original_model:
        allOf:
        - $ref: '#/definitions/models.OriginalModel'
        description: 关联模型
      original_model_id:
        description: 关联信息
        example: 1
        type: integer
      quantization:
        description: 量化类型 (F16/F32)
        example: F16
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ConvertedModelStatus'
        description: 状态管理
        example: completed
      tags:
        description: 元数据和标签
        example: optimized,production,bm1684x
        type: string
      target_chip:
        description: 目标芯片
        example: bm1684x
        type: string
      target_yolo_version:
        description: 目标YOLO版本
        example: yolov8
        type: string
      task_type:
        allOf:
        - $ref: '#/definitions/models.ModelTaskType'
        description: AI任务属性（继承自原始模型）
        example: detection
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        description: 创建用户ID
        example: 1
        type: integer
      version:
        description: 版本号
        example: 1.0.0
        type: string
    type: object
  models.ConvertedModelStatus:
    enum:
    - pending
    - converting
    - completed
    - failed
    type: string
    x-enum-comments:
      ConvertedModelStatusCompleted: 已完成
      ConvertedModelStatusConverting: 转换中
      ConvertedModelStatusFailed: 转换失败
      ConvertedModelStatusPending: 待转换
    x-enum-descriptions:
    - 待转换
    - 转换中
    - 已完成
    - 转换失败
    x-enum-varnames:
    - ConvertedModelStatusPending
    - ConvertedModelStatusConverting
    - ConvertedModelStatusCompleted
    - ConvertedModelStatusFailed
  models.DeploymentConfig:
    properties:
      cleanup_on_failure:
        description: 失败时清理
        type: boolean
      concurrent_limit:
        description: 并发限制
        type: integer
      retry_attempts:
        description: 重试次数
        type: integer
      stop_on_first_failure:
        description: 遇到第一个失败时停止
        type: boolean
      timeout_seconds:
        description: 超时时间(秒)
        type: integer
      validate_before_deploy:
        description: 部署前验证
        type: boolean
    type: object
  models.DeploymentLog:
    properties:
      action:
        description: '具体操作: get_task, check_box, convert_config, upload_model, create_task,
          etc'
        type: string
      box_id:
        description: 关联的盒子ID
        type: integer
      details:
        additionalProperties: true
        description: 详细信息
        type: object
      duration:
        description: 操作耗时(毫秒)
        example: 1500
        type: integer
      error:
        description: 错误信息
        type: string
      id:
        description: 日志序号
        type: integer
      level:
        description: '日志级别: INFO, WARN, ERROR, DEBUG'
        type: string
      message:
        description: 日志消息
        type: string
      phase:
        description: '部署阶段: init, validate, prepare, deploy, verify, cleanup'
        type: string
      stack_trace:
        description: 错误堆栈（ERROR级别时）
        type: string
      success:
        description: 操作是否成功
        type: boolean
      task_id:
        description: 关联的任务ID
        type: integer
      timestamp:
        description: 日志时间
        type: string
    type: object
  models.DeploymentResult:
    properties:
      box_id:
        type: integer
      duration:
        example: 300
        type: integer
      end_time:
        type: string
      error_code:
        type: string
      message:
        type: string
      start_time:
        type: string
      status:
        type: string
      success:
        type: boolean
      task_id:
        type: integer
    type: object
  models.DeploymentTask:
    properties:
      completed_at:
        description: 完成时间
        type: string
      completed_tasks:
        description: 已完成任务数
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 创建者信息
        type: integer
      deployment_config:
        description: 部署配置
        type: object
      description:
        description: 部署描述
        type: string
      error_message:
        description: 错误信息
        type: string
      estimated_time:
        description: 预计耗时(秒)
        example: 1800
        type: integer
      execution_logs:
        description: 日志和结果
        items:
          type: object
        type: array
      failed_tasks:
        description: 失败任务数
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      message:
        description: 当前状态消息
        type: string
      name:
        description: 部署任务名称
        type: string
      priority:
        description: 优先级(1-5)
        type: integer
      progress:
        description: 总体进度(0-100)
        type: number
      results:
        description: 部署结果
        items:
          type: object
        type: array
      skipped_tasks:
        description: 跳过任务数
        type: integer
      started_at:
        description: 时间记录
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.DeploymentTaskStatus'
        description: 部署状态
      target_box_ids:
        description: 部署配置
        items:
          type: integer
        type: array
      task_ids:
        description: 要部署的任务ID列表
        items:
          type: integer
        type: array
      total_tasks:
        description: 执行统计
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
    type: object
  models.DeploymentTaskStatus:
    enum:
    - pending
    - running
    - completed
    - failed
    - cancelled
    type: string
    x-enum-comments:
      DeploymentTaskStatusCancelled: 已取消
      DeploymentTaskStatusCompleted: 已完成
      DeploymentTaskStatusFailed: 失败
      DeploymentTaskStatusPending: 等待执行
      DeploymentTaskStatusRunning: 执行中
    x-enum-descriptions:
    - 等待执行
    - 执行中
    - 已完成
    - 失败
    - 已取消
    x-enum-varnames:
    - DeploymentTaskStatusPending
    - DeploymentTaskStatusRunning
    - DeploymentTaskStatusCompleted
    - DeploymentTaskStatusFailed
    - DeploymentTaskStatusCancelled
  models.DiskUsage:
    properties:
      device:
        type: string
      free:
        type: integer
      inodes_free:
        type: integer
      inodes_total:
        type: integer
      inodes_used:
        type: integer
      inodes_used_percent:
        type: number
      path:
        type: string
      total:
        type: integer
      type:
        type: string
      used:
        type: integer
      used_percent:
        type: number
    type: object
  models.ErrorDetail:
    properties:
      code:
        type: string
      context:
        additionalProperties:
          type: string
        type: object
      details:
        type: string
      message:
        type: string
      stack_trace:
        type: string
      timestamp:
        type: string
    type: object
  models.ExecutionConfig:
    description: 调度执行配置
    properties:
      auto_start_task:
        description: 调度后自动启动任务
        type: boolean
      max_concurrent:
        description: 最大并发调度数
        type: integer
      retry_attempts:
        description: 重试次数
        type: integer
      retry_interval_secs:
        description: 重试间隔（秒）
        type: integer
      skip_offline_boxes:
        description: 跳过离线盒子
        type: boolean
      timeout_seconds:
        description: 超时时间（秒）
        type: integer
      validate_before_run:
        description: 执行前验证任务配置
        type: boolean
    type: object
  models.ExtractFrame:
    properties:
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      error_msg:
        type: string
      file_size:
        type: integer
      format:
        type: string
      frame_index:
        type: integer
      frame_path:
        description: 帧信息
        type: string
      height:
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      name:
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ExtractFrameStatus'
        description: 状态信息
      task_id:
        description: 基本信息
        type: string
      timestamp:
        type: number
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        type: integer
      video_source_id:
        description: 关联信息
        type: integer
      width:
        description: 图像属性
        type: integer
    type: object
  models.ExtractFrameStatus:
    enum:
    - extracted
    - error
    - deleted
    type: string
    x-enum-comments:
      ExtractFrameStatusDeleted: 已删除
      ExtractFrameStatusError: 错误
      ExtractFrameStatusExtracted: 已提取
    x-enum-descriptions:
    - 已提取
    - 错误
    - 已删除
    x-enum-varnames:
    - ExtractFrameStatusExtracted
    - ExtractFrameStatusError
    - ExtractFrameStatusDeleted
  models.ExtractTask:
    properties:
      completed_at:
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        type: string
      duration:
        description: 抽帧时长(秒)
        type: integer
      error_msg:
        type: string
      extracted_count:
        description: 实际提取的帧数
        type: integer
      format:
        description: 图片格式
        type: string
      frame_count:
        description: 抽帧配置
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      interval:
        description: 抽帧间隔(秒)
        type: integer
      name:
        type: string
      output_dir:
        description: 输出信息
        type: string
      progress:
        type: integer
      quality:
        description: 图片质量(1-31,越小质量越高)
        type: integer
      start_time:
        description: 开始时间(秒)
        type: integer
      started_at:
        description: 执行信息
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ExtractTaskStatus'
        description: 状态信息
      task_id:
        description: 任务信息
        type: string
      total_size:
        description: 总文件大小
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        type: integer
      video_file_id:
        type: integer
      video_source_id:
        description: 关联信息
        type: integer
    type: object
  models.ExtractTaskStatus:
    enum:
    - pending
    - extracting
    - completed
    - stopped
    - failed
    type: string
    x-enum-comments:
      ExtractTaskStatusCompleted: 已完成
      ExtractTaskStatusExtracting: 抽帧中
      ExtractTaskStatusFailed: 失败
      ExtractTaskStatusPending: 待开始
      ExtractTaskStatusStopped: 已停止
    x-enum-descriptions:
    - 待开始
    - 抽帧中
    - 已完成
    - 已停止
    - 失败
    x-enum-varnames:
    - ExtractTaskStatusPending
    - ExtractTaskStatusExtracting
    - ExtractTaskStatusCompleted
    - ExtractTaskStatusStopped
    - ExtractTaskStatusFailed
  models.FileLimits:
    properties:
      image_file_max_size:
        description: 图片文件最大大小
        type: string
      model_file_max_size:
        description: 模型文件最大大小
        type: string
      supported_image_formats:
        description: 支持的图片格式
        items:
          type: string
        type: array
      supported_model_formats:
        description: 支持的模型格式
        items:
          type: string
        type: array
    type: object
  models.FileType:
    enum:
    - backend_program
    - frontend_ui
    type: string
    x-enum-comments:
      FileTypeBackendProgram: 后台程序文件 (box-app.soc)
      FileTypeFrontendUI: 前台界面文件 (dist.zip)
    x-enum-descriptions:
    - 后台程序文件 (box-app.soc)
    - 前台界面文件 (dist.zip)
    x-enum-varnames:
    - FileTypeBackendProgram
    - FileTypeFrontendUI
  models.ForwardInfo:
    properties:
      enabled:
        type: boolean
      host:
        type: string
      password:
        type: string
      port:
        type: integer
      topic:
        description: MQTT主题或HTTP路径
        type: string
      type:
        description: mqtt, http_post, websocket
        type: string
      username:
        type: string
    type: object
  models.Hardware:
    properties:
      cpu_cores:
        type: integer
      cpu_logical_cores:
        type: integer
      cpu_model_name:
        type: string
      hostname:
        type: string
      kernel_arch:
        type: string
      kernel_version:
        type: string
      os:
        type: string
      platform:
        type: string
      platform_family:
        type: string
      platform_version:
        type: string
      sdk_version:
        type: string
      software_build_time:
        type: string
      software_version:
        type: string
    type: object
  models.HeartbeatDeviceInfo:
    properties:
      device_fingerprint:
        description: 设备指纹
        type: string
      edition:
        description: 版本类型（如commercial）
        type: string
      is_valid:
        description: 许可证是否有效
        type: boolean
      license_id:
        description: 许可证ID
        type: string
    type: object
  models.HeartbeatDiskInfo:
    properties:
      device:
        description: 设备名
        type: string
      free:
        description: 空闲容量（字节）
        type: integer
      inodes_free:
        description: inode空闲数
        type: integer
      inodes_total:
        description: inode总数
        type: integer
      inodes_used:
        description: inode已用数
        type: integer
      inodes_used_percent:
        description: inode使用率
        type: number
      path:
        description: 挂载路径
        type: string
      total:
        description: 总容量（字节）
        type: integer
      type:
        description: 文件系统类型
        type: string
      used:
        description: 已用容量（字节）
        type: integer
      used_percent:
        description: 使用率
        type: number
    type: object
  models.HeartbeatSystemInfo:
    properties:
      board_temperature:
        description: 板载温度
        type: number
      core_temperature:
        description: 核心温度
        type: number
      cpu_percent:
        description: 各核心使用率
        items:
          type: number
        type: array
      cpu_total:
        description: CPU核心数
        type: integer
      cpu_used:
        description: 使用的CPU
        type: number
      cpu_used_percent:
        description: CPU使用率
        type: number
      disk_data:
        description: 磁盘信息
        items:
          $ref: '#/definitions/models.HeartbeatDiskInfo'
        type: array
      io_count:
        description: IO操作次数
        type: integer
      io_read_bytes:
        description: IO读取字节数
        type: integer
      io_read_time:
        description: IO读取时间
        type: integer
      io_write_bytes:
        description: IO写入字节数
        type: integer
      io_write_time:
        description: IO写入时间
        type: integer
      load_usage_percent:
        description: 负载使用率
        type: number
      load1:
        description: 1分钟负载
        type: number
      load5:
        description: 5分钟负载
        type: number
      load15:
        description: 15分钟负载
        type: number
      memory_available:
        description: 可用内存（字节）
        type: integer
      memory_total:
        description: 总内存（字节）
        type: integer
      memory_used:
        description: 已用内存（字节）
        type: integer
      memory_used_percent:
        description: 内存使用率
        type: number
      net_bytes_recv:
        description: 网络接收字节数
        type: integer
      net_bytes_sent:
        description: 网络发送字节数
        type: integer
      npu_memory_total:
        description: NPU内存总量
        type: number
      npu_memory_used:
        description: NPU内存已用量
        type: number
      procs:
        description: 进程数
        type: integer
      shot_time:
        description: 快照时间
        type: string
      swap_memory_available:
        description: 交换内存可用量
        type: integer
      swap_memory_total:
        description: 交换内存总量
        type: integer
      swap_memory_used:
        description: 交换内存已用量
        type: integer
      swap_memory_used_percent:
        description: 交换内存使用率
        type: number
      time_since_uptime:
        description: 启动时间
        type: string
      tpu_used:
        description: TPU使用率
        type: number
      uptime:
        description: 运行时间（秒）
        type: integer
      vpp_memory_total:
        description: VPP内存总量
        type: number
      vpp_memory_used:
        description: VPP内存已用量
        type: number
      vpu_memory_total:
        description: VPU内存总量
        type: number
      vpu_memory_used:
        description: VPU内存已用量
        type: number
    type: object
  models.HeartbeatTaskStatInfo:
    properties:
      stats:
        allOf:
        - $ref: '#/definitions/models.HeartbeatTaskStatsData'
        description: 任务统计数据
      task_id:
        description: 任务ID
        type: string
    type: object
  models.HeartbeatTaskStatsData:
    properties:
      avg_fps:
        description: 平均帧率
        type: number
      avg_inference_time_ms:
        description: 平均推理时间（毫秒）
        type: number
      forward_failed:
        description: 转发失败次数
        type: integer
      forward_success:
        description: 转发成功次数
        type: integer
      inference_count:
        description: 推理次数
        type: integer
      last_error:
        description: 最后错误信息
        type: string
      start_time:
        description: 启动时间（毫秒时间戳）
        type: integer
      status:
        description: 任务状态：RUNNING, STOPPED, ERROR等
        type: string
      stop_time:
        description: 停止时间（毫秒时间戳，0表示未停止）
        type: integer
      total_frames:
        description: 处理的总帧数
        type: integer
      total_inference_time_ms:
        description: 总推理时间（毫秒）
        type: integer
    type: object
  models.HeartbeatTasksInfo:
    properties:
      running_tasks:
        description: 运行中任务数
        type: integer
      tasks:
        description: 任务统计列表
        items:
          $ref: '#/definitions/models.HeartbeatTaskStatInfo'
        type: array
      total_tasks:
        description: 任务总数
        type: integer
    type: object
  models.InferenceTask:
    properties:
      businessProcess:
        description: Lua脚本路径
        type: string
      forwardInfo:
        allOf:
        - $ref: '#/definitions/models.ForwardInfo'
        description: 为了向后兼容，保留单个ForwardInfo
      forwardInfos:
        items:
          $ref: '#/definitions/models.ForwardInfo'
        type: array
      modelName:
        description: 保持向后兼容
        type: string
      originalModelId:
        type: string
      roiIds:
        description: 关联的ROI ID列表
        items:
          type: integer
        type: array
      rtspPushUrl:
        type: string
      sendSSEImage:
        type: boolean
      threshold:
        type: number
      type:
        description: detection, segmentation, classification, custom
        type: string
    type: object
  models.LogLevel:
    enum:
    - debug
    - info
    - warn
    - error
    - fatal
    type: string
    x-enum-varnames:
    - LogLevelDebug
    - LogLevelInfo
    - LogLevelWarn
    - LogLevelError
    - LogLevelFatal
  models.MetaDefaults:
    properties:
      conf_threshold:
        description: 默认置信度阈值
        type: number
      hardware:
        description: 默认硬件
        type: string
      nms_threshold:
        description: 默认NMS阈值
        type: number
      type:
        description: 默认类型
        type: string
      version:
        description: 默认版本
        type: string
    type: object
  models.ModelBoxDeployment:
    description: 记录转换后模型在哪些盒子上已成功部署
    properties:
      box:
        $ref: '#/definitions/models.Box'
      box_id:
        description: 盒子ID
        type: integer
      converted_model:
        allOf:
        - $ref: '#/definitions/models.ConvertedModel'
        description: 关联对象
      converted_model_id:
        description: 关联信息
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      deployed_at:
        description: 部署信息
        type: string
      deployment_path:
        description: 部署路径
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      is_verified:
        description: 验证信息
        type: boolean
      last_verified_at:
        description: 最后验证时间
        type: string
      model_key:
        description: 模型Key
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ModelBoxDeploymentStatus'
        description: 部署状态
      task_id:
        description: 部署任务ID
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      verification_msg:
        description: 验证消息
        type: string
      version:
        description: 部署时的模型版本
        type: string
    type: object
  models.ModelBoxDeploymentStatus:
    enum:
    - active
    - inactive
    - removed
    - error
    type: string
    x-enum-comments:
      ModelBoxDeploymentStatusActive: 活跃（可用）
      ModelBoxDeploymentStatusError: 错误状态
      ModelBoxDeploymentStatusInactive: 不活跃（盒子离线等）
      ModelBoxDeploymentStatusRemoved: 已移除
    x-enum-descriptions:
    - 活跃（可用）
    - 不活跃（盒子离线等）
    - 已移除
    - 错误状态
    x-enum-varnames:
    - ModelBoxDeploymentStatusActive
    - ModelBoxDeploymentStatusInactive
    - ModelBoxDeploymentStatusRemoved
    - ModelBoxDeploymentStatusError
  models.ModelConfigValues:
    properties:
      allowed_file_types:
        description: 允许的文件类型，默认[".pt", ".onnx"]
        items:
          type: string
        type: array
      chunk_size_mb:
        description: 分片大小（MB），默认5
        type: integer
      cleanup_days:
        description: 清理天数，默认7
        type: integer
      max_file_size_mb:
        description: 最大文件大小（MB），默认10240
        type: integer
      session_timeout_hours:
        description: 会话超时时间（小时），默认24
        type: integer
    type: object
  models.ModelDeploymentItem:
    properties:
      box:
        $ref: '#/definitions/models.Box'
      box_address:
        description: 盒子地址
        type: string
      box_id:
        description: 盒子ID
        type: integer
      converted_model:
        allOf:
        - $ref: '#/definitions/models.ConvertedModel'
        description: 关联对象
      converted_model_id:
        description: 转换后模型ID
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      end_time:
        description: 结束时间
        type: string
      error_message:
        description: 错误信息
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      model_exists:
        description: 模型是否已存在于盒子
        type: boolean
      model_key:
        description: 部署信息
        type: string
      start_time:
        description: 开始时间
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ModelDeploymentItemStatus'
        description: 部署状态
      task:
        $ref: '#/definitions/models.ModelDeploymentTask'
      task_id:
        description: 关联信息
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upload_needed:
        description: 是否需要上传
        type: boolean
      upload_size:
        description: 上传文件大小
        type: integer
    type: object
  models.ModelDeploymentItemStatus:
    enum:
    - pending
    - checking
    - uploading
    - completed
    - failed
    - skipped
    type: string
    x-enum-comments:
      ModelDeploymentItemStatusChecking: 检查模型
      ModelDeploymentItemStatusCompleted: 已完成
      ModelDeploymentItemStatusFailed: 失败
      ModelDeploymentItemStatusPending: 待处理
      ModelDeploymentItemStatusSkipped: 跳过
      ModelDeploymentItemStatusUploading: 上传中
    x-enum-descriptions:
    - 待处理
    - 检查模型
    - 上传中
    - 已完成
    - 失败
    - 跳过
    x-enum-varnames:
    - ModelDeploymentItemStatusPending
    - ModelDeploymentItemStatusChecking
    - ModelDeploymentItemStatusUploading
    - ModelDeploymentItemStatusCompleted
    - ModelDeploymentItemStatusFailed
    - ModelDeploymentItemStatusSkipped
  models.ModelDeploymentStatus:
    enum:
    - pending
    - running
    - completed
    - failed
    - cancelled
    type: string
    x-enum-comments:
      ModelDeploymentStatusCancelled: 已取消
      ModelDeploymentStatusCompleted: 已完成
      ModelDeploymentStatusFailed: 失败
      ModelDeploymentStatusPending: 待处理
      ModelDeploymentStatusRunning: 运行中
    x-enum-descriptions:
    - 待处理
    - 运行中
    - 已完成
    - 失败
    - 已取消
    x-enum-varnames:
    - ModelDeploymentStatusPending
    - ModelDeploymentStatusRunning
    - ModelDeploymentStatusCompleted
    - ModelDeploymentStatusFailed
    - ModelDeploymentStatusCancelled
  models.ModelDeploymentTask:
    properties:
      boxes:
        items:
          $ref: '#/definitions/models.Box'
        type: array
      converted_models:
        description: 关联对象
        items:
          $ref: '#/definitions/models.ConvertedModel'
        type: array
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      deployment_items:
        items:
          $ref: '#/definitions/models.ModelDeploymentItem'
        type: array
      end_time:
        description: 结束时间
        type: string
      error_message:
        description: 错误信息
        type: string
      failed_items:
        description: 失败部署项数
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      logs:
        description: 部署日志
        type: string
      name:
        description: 任务名称
        type: string
      progress:
        description: 进度 (0-100)
        type: integer
      skipped_items:
        description: 跳过部署项数 (已存在)
        type: integer
      start_time:
        description: 开始时间
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.ModelDeploymentStatus'
        description: 任务状态
      success_items:
        description: 成功部署项数
        type: integer
      task_id:
        description: 任务标识
        type: string
      total_items:
        description: 部署结果统计
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        description: 创建用户ID
        type: integer
    type: object
  models.ModelTaskType:
    enum:
    - detection
    - detection_obb
    - segmentation
    type: string
    x-enum-comments:
      ModelTaskTypeDetection: 目标检测
      ModelTaskTypeDetectionObb: 目标检测OBB
      ModelTaskTypeSegmentation: 图像分割
    x-enum-descriptions:
    - 目标检测
    - 目标检测OBB
    - 图像分割
    x-enum-varnames:
    - ModelTaskTypeDetection
    - ModelTaskTypeDetectionObb
    - ModelTaskTypeSegmentation
  models.OriginalModel:
    description: 原始模型数据结构，用于管理用户上传的 pt/onnx 格式模型
    properties:
      author:
        description: 作者
        example: 张三
        type: string
      converted_models:
        description: 转换关联
        items:
          $ref: '#/definitions/models.ConvertedModel'
        type: array
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        description: 模型描述
        example: YOLO v5 目标检测模型
        type: string
      download_count:
        description: 下载次数
        example: 10
        type: integer
      file_md5:
        description: 文件MD5校验和
        example: d41d8cd98f00b204e9800998ecf8427e
        type: string
      file_name:
        description: 文件信息
        example: yolo-v5.pt
        type: string
      file_path:
        description: 文件存储路径
        example: /data/models/original/2025/01/28/yolo-v5-abc123.pt
        type: string
      file_sha256:
        description: 文件SHA256校验和
        example: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
        type: string
      file_size:
        description: 文件大小（字节）
        example: 52428800
        type: integer
      framework:
        description: 模型框架
        example: pytorch
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      input_channels:
        description: 输入通道数
        example: 3
        type: integer
      input_height:
        description: 输入高度
        example: 640
        type: integer
      input_width:
        description: 输入宽度
        example: 640
        type: integer
      is_validated:
        description: 是否已验证
        example: false
        type: boolean
      last_accessed:
        description: 最后访问时间
        example: "2025-01-28T12:00:00Z"
        type: string
      model_format:
        description: 模型格式
        example: pytorch
        type: string
      model_type:
        allOf:
        - $ref: '#/definitions/models.OriginalModelType'
        description: 模型属性
        example: pt
      model_url:
        description: 模型源地址
        example: https://github.com/ultralytics/yolov5
        type: string
      name:
        description: 基本信息
        example: yolo-v5
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.OriginalModelStatus'
        description: 状态管理
        example: uploading
      storage_class:
        description: 存储级别 (hot/warm/cold)
        example: hot
        type: string
      tags:
        description: 元数据
        example: object_detection,yolo,pytorch
        type: string
      task_type:
        allOf:
        - $ref: '#/definitions/models.ModelTaskType'
        description: AI任务属性
        example: detection
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upload_progress:
        description: 上传进度 (0-100)
        example: 100
        type: integer
      user_id:
        description: 访问控制
        example: 1
        type: integer
      validation_msg:
        description: 验证信息
        example: ""
        type: string
      version:
        description: 版本号
        example: 1.0.0
        type: string
    required:
    - model_type
    - name
    - version
    type: object
  models.OriginalModelStatus:
    enum:
    - uploading
    - failed
    - ready
    type: string
    x-enum-comments:
      OriginalModelStatusFailed: 失败
      OriginalModelStatusReady: 就绪
      OriginalModelStatusUploading: 上传中
    x-enum-descriptions:
    - 上传中
    - 失败
    - 就绪
    x-enum-varnames:
    - OriginalModelStatusUploading
    - OriginalModelStatusFailed
    - OriginalModelStatusReady
  models.OriginalModelType:
    enum:
    - pt
    - onnx
    type: string
    x-enum-comments:
      OriginalModelTypeONNX: ONNX 模型
      OriginalModelTypePT: PyTorch 模型
    x-enum-descriptions:
    - PyTorch 模型
    - ONNX 模型
    x-enum-varnames:
    - OriginalModelTypePT
    - OriginalModelTypeONNX
  models.OutputSettings:
    properties:
      sendFullImage:
        description: 0=否，1=是
        type: integer
    type: object
  models.PackageStatus:
    enum:
    - pending
    - verifying
    - ready
    - failed
    - archived
    type: string
    x-enum-comments:
      PackageStatusArchived: 已归档
      PackageStatusFailed: 验证失败
      PackageStatusPending: 待处理
      PackageStatusReady: 就绪
      PackageStatusVerifying: 验证中
    x-enum-descriptions:
    - 待处理
    - 验证中
    - 就绪
    - 验证失败
    - 已归档
    x-enum-varnames:
    - PackageStatusPending
    - PackageStatusVerifying
    - PackageStatusReady
    - PackageStatusFailed
    - PackageStatusArchived
  models.Point:
    properties:
      x:
        type: integer
      "y":
        type: integer
    type: object
  models.ROIConfig:
    properties:
      areas:
        description: 多边形顶点（可选）
        items:
          $ref: '#/definitions/models.Point'
        type: array
      height:
        description: 区域高度
        type: integer
      id:
        type: integer
      name:
        description: ROI名称
        type: string
      width:
        description: 区域宽度
        type: integer
      x:
        description: X坐标
        type: integer
      "y":
        description: Y坐标
        type: integer
    type: object
  models.RecordTask:
    properties:
      actual_duration:
        type: number
      completed_at:
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      duration:
        description: 录制时长(分钟)
        type: integer
      error_msg:
        type: string
      file_size:
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      name:
        type: string
      output_path:
        description: 输出信息
        type: string
      progress:
        type: integer
      started_at:
        description: 执行信息
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.RecordTaskStatus'
        description: 状态信息
      task_id:
        description: 任务信息
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        type: integer
      video_source_id:
        description: 关联信息
        type: integer
    type: object
  models.RecordTaskStatus:
    enum:
    - pending
    - recording
    - completed
    - stopped
    - failed
    type: string
    x-enum-comments:
      RecordTaskStatusCompleted: 已完成
      RecordTaskStatusFailed: 失败
      RecordTaskStatusPending: 待开始
      RecordTaskStatusRecording: 录制中
      RecordTaskStatusStopped: 已停止
    x-enum-descriptions:
    - 待开始
    - 录制中
    - 已完成
    - 已停止
    - 失败
    x-enum-varnames:
    - RecordTaskStatusPending
    - RecordTaskStatusRecording
    - RecordTaskStatusCompleted
    - RecordTaskStatusStopped
    - RecordTaskStatusFailed
  models.Resources:
    properties:
      board_temperature:
        type: number
      core_temperature:
        type: number
      cpu_percent:
        items:
          type: number
        type: array
      cpu_total:
        type: integer
      cpu_used:
        type: number
      cpu_used_percent:
        type: number
      disk_data:
        items:
          $ref: '#/definitions/models.DiskUsage'
        type: array
      io_count:
        type: integer
      io_read_bytes:
        type: integer
      io_read_time:
        type: integer
      io_write_bytes:
        type: integer
      io_write_time:
        type: integer
      load_usage_percent:
        type: number
      load1:
        type: number
      load5:
        type: number
      load15:
        type: number
      memory_available:
        type: integer
      memory_total:
        type: integer
      memory_used:
        type: integer
      memory_used_percent:
        type: number
      net_bytes_recv:
        type: integer
      net_bytes_sent:
        type: integer
      npu_memory_total:
        type: integer
      npu_memory_used:
        type: integer
      procs:
        type: integer
      shot_time:
        type: string
      swap_memory_available:
        type: integer
      swap_memory_total:
        type: integer
      swap_memory_used:
        type: integer
      swap_memory_used_percent:
        type: number
      time_since_uptime:
        type: string
      tpu_used:
        type: integer
      uptime:
        type: integer
      vpp_memory_total:
        type: integer
      vpp_memory_used:
        type: integer
      vpu_memory_total:
        type: integer
      vpu_memory_used:
        type: integer
    type: object
  models.RunStatus:
    enum:
    - stopped
    - running
    type: string
    x-enum-comments:
      RunStatusRunning: 运行中
      RunStatusStopped: 已停止
    x-enum-descriptions:
    - 已停止
    - 运行中
    x-enum-varnames:
    - RunStatusStopped
    - RunStatusRunning
  models.SchedulePolicyType:
    enum:
    - priority
    - load_balance
    - resource_match
    type: string
    x-enum-varnames:
    - SchedulePolicyTypePriority
    - SchedulePolicyTypeLoadBalance
    - SchedulePolicyTypeResourceMatch
  models.ScheduleRules:
    description: 调度规则配置
    properties:
      cpu_threshold:
        description: CPU 使用率阈值(%)
        type: number
      enable_fallback:
        description: 启用回退策略
        type: boolean
      max_tasks_per_box:
        description: 负载均衡策略配置
        type: integer
      memory_threshold:
        description: 内存使用率阈值(%)
        type: number
      min_match_score:
        description: 最小匹配分数(0-100)
        type: number
      prefer_less_loaded:
        description: 优先选择负载较低的盒子
        type: boolean
      prefer_online_boxes:
        description: 通用配置
        type: boolean
      priority_weights:
        additionalProperties:
          format: float64
          type: number
        description: 优先级策略配置
        type: object
      require_tag_match:
        description: 资源匹配策略配置
        type: boolean
      tpu_threshold:
        description: TPU 使用率阈值(%)
        type: number
    type: object
  models.ScheduleStatus:
    enum:
    - unassigned
    - assigned
    type: string
    x-enum-comments:
      ScheduleStatusAssigned: 已分配
      ScheduleStatusUnassigned: 未分配
    x-enum-descriptions:
    - 未分配
    - 已分配
    x-enum-varnames:
    - ScheduleStatusUnassigned
    - ScheduleStatusAssigned
  models.SystemConfigValues:
    properties:
      default_page_size:
        description: 默认分页大小，默认20
        type: integer
      log_retention_days:
        description: 日志保留天数，默认30
        type: integer
      maintenance_mode:
        description: 维护模式开关，默认false
        type: boolean
      notification_enabled:
        description: 通知开关，默认true
        type: boolean
    type: object
  models.SystemLog:
    properties:
      created_at:
        description: 创建时间
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: 软删除时间
      details:
        description: 详细信息（如错误堆栈）
        type: string
      id:
        type: integer
      level:
        allOf:
        - $ref: '#/definitions/models.LogLevel'
        description: 日志级别
      message:
        description: 日志消息
        type: string
      metadata:
        description: 元数据（JSON格式）
        type: string
      request_id:
        description: 请求ID（用于追踪）
        type: string
      source:
        description: 日志来源（服务名称）
        type: string
      source_id:
        description: 来源ID（如任务ID、盒子ID等）
        type: string
      title:
        description: 日志标题
        type: string
      updated_at:
        description: 更新时间
        type: string
      user_id:
        description: 关联用户ID
        type: integer
    type: object
  models.Task:
    properties:
      affinity_tags:
        description: 亲和性标签，用于匹配盒子标签
        items:
          type: string
        type: array
      auto_schedule:
        description: 任务调度和亲和性配置
        type: boolean
      auto_start:
        type: boolean
      box:
        allOf:
        - $ref: '#/definitions/models.Box'
        description: 关联关系
      box_id:
        description: 修改为指针类型，允许为空
        type: integer
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 创建者
        type: integer
      deployment_id:
        description: 部署ID
        type: string
      description:
        description: 任务描述
        type: string
      external_id:
        description: 盒子上的原始任务ID（同步时使用）
        type: string
      forward_failed:
        type: integer
      forward_success:
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      inference_count:
        type: integer
      inference_tasks:
        items:
          $ref: '#/definitions/models.InferenceTask'
        type: array
      is_synchronized:
        description: 是否已同步
        type: boolean
      last_error:
        type: string
      last_heartbeat:
        description: 最后心跳时间
        type: string
      max_retries:
        description: 最大重试次数
        type: integer
      name:
        description: 任务名称
        type: string
      output_settings:
        allOf:
        - $ref: '#/definitions/models.OutputSettings'
        description: 任务配置
      priority:
        description: 优先级(1-5)
        type: integer
      progress:
        description: 进度(0-100)
        type: number
      retry_count:
        description: 重试次数
        type: integer
      rois:
        items:
          $ref: '#/definitions/models.ROIConfig'
        type: array
      run_status:
        allOf:
        - $ref: '#/definitions/models.RunStatus'
        description: 运行状态
      schedule_status:
        allOf:
        - $ref: '#/definitions/models.ScheduleStatus'
        description: 调度状态
      scheduled_at:
        description: 计划执行时间
        type: string
      skip_frame:
        type: integer
      source:
        description: 任务来源：manual(手动创建), synced(从盒子同步)
        type: string
      start_time:
        description: 运行统计
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.TaskStatus'
        description: 保留用于向后兼容
      stop_time:
        type: string
      sub_status:
        description: 子状态
        type: string
      tags:
        description: REQ-005 新增字段
        items:
          type: string
        type: array
      task_id:
        description: 在盒子上的任务ID
        type: string
      task_level_forward_infos:
        description: 任务级别转发配置
        items:
          $ref: '#/definitions/models.ForwardInfo'
        type: array
      total_frames:
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      useROItoInference:
        description: 是否使用ROI进行推理
        type: boolean
      video_source:
        $ref: '#/definitions/models.VideoSource'
      video_source_id:
        description: 关联的视频源ID
        type: integer
    type: object
  models.TaskConfigValues:
    properties:
      auto_schedule_enabled:
        description: 自动调度开关，默认true
        type: boolean
      default_priority:
        description: 默认任务优先级（1-5），默认3
        type: integer
      deployment_timeout_seconds:
        description: 部署超时时间（秒），默认300
        type: integer
      max_concurrent_per_box:
        description: 每盒子最大并发任务数，默认10
        type: integer
      retry_max_attempts:
        description: 任务重试最大次数，默认3
        type: integer
      schedule_interval_seconds:
        description: 调度间隔（秒），默认60
        type: integer
    type: object
  models.TaskStatus:
    enum:
    - pending
    - scheduled
    - running
    - completed
    - failed
    - cancelled
    - paused
    - stopped
    - stopping
    type: string
    x-enum-comments:
      TaskStatusCancelled: 已取消
      TaskStatusCompleted: 已完成
      TaskStatusFailed: 执行失败
      TaskStatusPaused: 已暂停
      TaskStatusPending: 待执行
      TaskStatusRunning: 执行中
      TaskStatusScheduled: 已调度
      TaskStatusStopped: 已停止
      TaskStatusStopping: 停止中
    x-enum-descriptions:
    - 待执行
    - 已调度
    - 执行中
    - 已完成
    - 执行失败
    - 已取消
    - 已暂停
    - 已停止
    - 停止中
    x-enum-varnames:
    - TaskStatusPending
    - TaskStatusScheduled
    - TaskStatusRunning
    - TaskStatusCompleted
    - TaskStatusFailed
    - TaskStatusCancelled
    - TaskStatusPaused
    - TaskStatusStopped
    - TaskStatusStopping
  models.TriggerConditions:
    description: 调度触发条件配置
    properties:
      cron_expression:
        description: Cron 表达式，空表示不使用
        type: string
      interval_seconds:
        description: 定时间隔（秒），0表示不使用定时触发
        type: integer
      on_box_online:
        description: 盒子上线时触发
        type: boolean
      on_new_task:
        description: 新任务创建时触发
        type: boolean
      on_resource_change:
        description: 资源变化时触发
        type: boolean
      on_task_failed:
        description: 任务失败时触发（重新调度）
        type: boolean
    type: object
  models.UpgradeFile:
    properties:
      checksum:
        description: 文件校验和
        type: string
      content_type:
        description: MIME类型
        type: string
      name:
        description: 文件名
        type: string
      path:
        description: 存储路径
        type: string
      size:
        description: 文件大小
        type: integer
      type:
        allOf:
        - $ref: '#/definitions/models.FileType'
        description: 文件类型
      uploaded_at:
        description: 上传时间
        type: string
    type: object
  models.UpgradePackage:
    properties:
      checksum:
        description: 整包校验和
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        description: 描述
        type: string
      download_count:
        description: 统计信息
        type: integer
      files:
        description: 文件信息
        items:
          $ref: '#/definitions/models.UpgradeFile'
        type: array
      id:
        description: 主键ID
        example: 1
        type: integer
      is_prerelease:
        description: 是否为预发布版本
        type: boolean
      max_box_version:
        description: 最大支持的盒子版本
        type: string
      min_box_version:
        description: 兼容性
        type: string
      name:
        description: 升级包名称
        type: string
      release_notes:
        description: 发布信息
        type: string
      released_at:
        description: 发布时间
        type: string
      released_by:
        description: 发布者
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/models.PackageStatus'
        description: 状态
      total_size:
        description: 总大小(bytes)
        type: integer
      type:
        allOf:
        - $ref: '#/definitions/models.UpgradePackageType'
        description: 升级包类型
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upgrade_count:
        description: 升级次数
        type: integer
      version:
        description: 版本号
        type: string
    type: object
  models.UpgradePackageType:
    enum:
    - backend
    - frontend
    type: string
    x-enum-comments:
      PackageTypeBackend: 仅后台程序
      PackageTypeFrontend: 仅前台界面
    x-enum-descriptions:
    - 仅后台程序
    - 仅前台界面
    x-enum-varnames:
    - PackageTypeBackend
    - PackageTypeFrontend
  models.UpgradeStatus:
    enum:
    - pending
    - running
    - completed
    - failed
    - cancelled
    - rolledback
    type: string
    x-enum-comments:
      UpgradeStatusCancelled: 已取消
      UpgradeStatusCompleted: 已完成
      UpgradeStatusFailed: 执行失败
      UpgradeStatusPending: 待执行
      UpgradeStatusRolledback: 已回滚
      UpgradeStatusRunning: 执行中
    x-enum-descriptions:
    - 待执行
    - 执行中
    - 已完成
    - 执行失败
    - 已取消
    - 已回滚
    x-enum-varnames:
    - UpgradeStatusPending
    - UpgradeStatusRunning
    - UpgradeStatusCompleted
    - UpgradeStatusFailed
    - UpgradeStatusCancelled
    - UpgradeStatusRolledback
  models.UpgradeTask:
    properties:
      batch_upgrade_task:
        $ref: '#/definitions/models.BatchUpgradeTask'
      batch_upgrade_task_id:
        description: 批量任务关联
        type: integer
      box:
        allOf:
        - $ref: '#/definitions/models.Box'
        description: 关联关系
      box_id:
        type: integer
      can_rollback:
        description: 回滚信息
        type: boolean
      completed_at:
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      created_by:
        description: 创建者
        type: integer
      error_details:
        $ref: '#/definitions/models.ErrorDetail'
      error_message:
        description: 错误信息
        type: string
      force:
        type: boolean
      id:
        description: 主键ID
        example: 1
        type: integer
      name:
        type: string
      program_file:
        description: 兼容字段，逐步废弃
        type: string
      progress:
        description: 0-100
        type: integer
      rollback_task_id:
        description: 关联的回滚任务ID
        type: integer
      rollback_version:
        type: string
      started_at:
        description: 时间相关
        type: string
      status:
        $ref: '#/definitions/models.UpgradeStatus'
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      upgrade_package:
        $ref: '#/definitions/models.UpgradePackage'
      upgrade_package_id:
        description: 关联升级包
        type: integer
      version_from:
        type: string
      version_to:
        type: string
    type: object
  models.VideoConfigValues:
    properties:
      extract_default_frame_count:
        description: 默认抽帧数量，默认10
        type: integer
      extract_default_quality:
        description: 默认抽帧质量（1-5），默认2
        type: integer
      extract_max_frame_count:
        description: 最大抽帧数量，默认1000
        type: integer
      record_default_duration:
        description: 默认录制时长（秒），默认60
        type: integer
      record_default_format:
        description: 默认录制格式，默认"mp4"
        type: string
      record_max_duration:
        description: 最大录制时长（秒），默认3600
        type: integer
    type: object
  models.VideoFile:
    properties:
      bitrate:
        type: integer
      codec:
        type: string
      converted_path:
        type: string
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        type: string
      display_name:
        type: string
      duration:
        type: number
      error_msg:
        type: string
      file_size:
        type: integer
      format:
        type: string
      frame_rate:
        type: number
      height:
        type: integer
      id:
        description: 主键ID
        example: 1
        type: integer
      name:
        description: 基本信息
        type: string
      original_file_name:
        description: 存储用户上传时的原始文件名
        type: string
      original_path:
        description: 文件信息
        type: string
      play_url:
        type: string
      process_progress:
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/models.VideoFileStatus'
        description: 处理状态
      stream_app:
        description: ZLMediaKit 相关
        type: string
      stream_id:
        type: string
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      user_id:
        type: integer
      video_source_id:
        description: 关联信息
        type: integer
      width:
        description: 视频属性
        type: integer
    type: object
  models.VideoFileStatus:
    enum:
    - uploaded
    - converting
    - completed
    - ready
    - failed
    - error
    type: string
    x-enum-comments:
      VideoFileStatusCompleted: 转换完成
      VideoFileStatusConverting: 转换中
      VideoFileStatusError: 错误
      VideoFileStatusFailed: 失败
      VideoFileStatusReady: 就绪
      VideoFileStatusUploaded: 已上传
    x-enum-descriptions:
    - 已上传
    - 转换中
    - 转换完成
    - 就绪
    - 失败
    - 错误
    x-enum-varnames:
    - VideoFileStatusUploaded
    - VideoFileStatusConverting
    - VideoFileStatusCompleted
    - VideoFileStatusReady
    - VideoFileStatusFailed
    - VideoFileStatusError
  models.VideoSource:
    properties:
      created_at:
        description: 创建时间
        example: "2025-01-26T12:00:00Z"
        type: string
      description:
        type: string
      error_msg:
        type: string
      id:
        description: 主键ID
        example: 1
        type: integer
      key:
        description: 流代理的唯一标识key
        type: string
      last_active:
        type: string
      name:
        description: 基本信息
        type: string
      password:
        type: string
      play_url:
        description: 播放地址
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.VideoSourceStatus'
        description: 状态信息
      stream_id:
        description: ZLMediaKit 流信息
        type: string
      type:
        $ref: '#/definitions/models.VideoSourceType'
      updated_at:
        description: 更新时间
        example: "2025-01-26T12:00:00Z"
        type: string
      url:
        description: 连接信息
        type: string
      user_id:
        description: 关联信息
        type: integer
      username:
        type: string
      video_file_id:
        description: 关联的视频文件ID（仅文件类型使用）
        type: integer
    type: object
  models.VideoSourceStatus:
    enum:
    - inactive
    - active
    - error
    type: string
    x-enum-comments:
      VideoSourceStatusActive: 活跃
      VideoSourceStatusError: 错误
      VideoSourceStatusInactive: 未激活
    x-enum-descriptions:
    - 未激活
    - 活跃
    - 错误
    x-enum-varnames:
    - VideoSourceStatusInactive
    - VideoSourceStatusActive
    - VideoSourceStatusError
  models.VideoSourceType:
    enum:
    - stream
    - file
    type: string
    x-enum-comments:
      VideoSourceTypeFile: 视频文件
      VideoSourceTypeStream: 实时流
    x-enum-descriptions:
    - 实时流
    - 视频文件
    x-enum-varnames:
    - VideoSourceTypeStream
    - VideoSourceTypeFile
  service.BoxCapabilities:
    properties:
      available_memory_gb:
        type: number
      available_storage_gb:
        type: number
      gpu_info:
        type: string
      has_gpu:
        type: boolean
      installed_frameworks:
        items:
          type: string
        type: array
    type: object
  service.BoxModel:
    properties:
      box_id:
        type: integer
      deployed_at:
        type: string
      file_size:
        type: integer
      last_used_at:
        type: string
      model_key:
        type: string
      model_name:
        type: string
      status:
        $ref: '#/definitions/service.DeployStatus'
      version:
        type: string
    type: object
  service.BoxScore:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      has_capacity:
        type: boolean
      is_online:
        type: boolean
      reasons:
        items:
          type: string
        type: array
      score:
        type: number
      tag_matches:
        type: integer
    type: object
  service.CompatibilityDetails:
    properties:
      framework:
        description: 框架兼容性
        type: boolean
      hardware:
        description: 硬件兼容性
        type: boolean
      memory:
        description: 内存充足性
        type: boolean
      overall_score:
        description: 总体兼容性分数 (0-100)
        type: integer
      storage:
        description: 存储充足性
        type: boolean
      version:
        description: 版本兼容性
        type: boolean
    type: object
  service.CompatibilityResult:
    properties:
      box_capabilities:
        $ref: '#/definitions/service.BoxCapabilities'
      box_id:
        type: integer
      checked_at:
        type: string
      compatibility:
        $ref: '#/definitions/service.CompatibilityDetails'
      is_compatible:
        type: boolean
      model_key:
        type: string
      requirements:
        $ref: '#/definitions/service.ModelRequirements'
    type: object
  service.ConnectionStats:
    properties:
      active_since:
        type: string
      connections_by_channel:
        additionalProperties:
          type: integer
        type: object
      connections_by_user_id:
        additionalProperties:
          type: integer
        type: object
      total_connections:
        type: integer
    type: object
  service.ConversionProgress:
    properties:
      elapsed_time:
        type: string
      error_message:
        type: string
      progress:
        type: integer
      progress_message:
        type: string
      start_time:
        type: string
      status:
        type: string
      task_id:
        type: string
    type: object
  service.ConversionStatistics:
    properties:
      average_execution_time:
        description: 格式如"25m30s"
        type: string
      completed_tasks:
        type: integer
      failed_tasks:
        type: integer
      pending_tasks:
        type: integer
      running_tasks:
        type: integer
      success_rate:
        type: number
      total_tasks:
        type: integer
    type: object
  service.ConvertedModelStatistics:
    properties:
      active_models:
        type: integer
      chip_stats:
        additionalProperties:
          format: int64
          type: integer
        type: object
      deployed_models:
        type: integer
      status_stats:
        additionalProperties:
          format: int64
          type: integer
        type: object
      total_models:
        type: integer
    type: object
  service.CreateConversionTaskRequest:
    properties:
      auto_start:
        description: 是否自动启动
        example: true
        type: boolean
      created_by:
        description: 创建用户ID
        example: 1
        type: integer
      original_model_id:
        description: 原始模型ID
        example: 1
        type: integer
      quantizations:
        description: 量化类型列表（可选，默认F16）
        example:
        - F16
        - F32
        items:
          type: string
        type: array
      target_chips:
        description: 目标芯片列表（最多2个）
        example:
        - BM1684X
        items:
          type: string
        type: array
      target_yolo_version:
        description: 目标YOLO版本，默认yolov8
        example: yolov8
        type: string
    required:
    - created_by
    - original_model_id
    - target_chips
    type: object
  service.CreateConvertedModelRequest:
    properties:
      conversion_task_id:
        type: string
      convert_params:
        type: string
      description:
        type: string
      display_name:
        type: string
      file_md5:
        type: string
      file_name:
        type: string
      file_path:
        type: string
      file_sha256:
        type: string
      file_size:
        type: integer
      name:
        type: string
      original_model_id:
        type: integer
      quantization:
        type: string
      tags:
        items:
          type: string
        type: array
      user_id:
        type: integer
      version:
        type: string
    required:
    - file_name
    - file_path
    - name
    - original_model_id
    - user_id
    - version
    type: object
  service.CreateExtractTaskRequest:
    properties:
      description:
        type: string
      duration:
        type: integer
      format:
        default: jpg
        type: string
      frame_count:
        type: integer
      interval:
        type: integer
      name:
        type: string
      quality:
        default: 2
        type: integer
      start_time:
        type: integer
      user_id:
        type: integer
      video_file_id:
        type: integer
      video_source_id:
        type: integer
    required:
    - name
    - user_id
    type: object
  service.CreateRecordTaskRequest:
    properties:
      duration:
        type: integer
      name:
        type: string
      user_id:
        type: integer
      video_source_id:
        type: integer
    required:
    - duration
    - name
    - user_id
    - video_source_id
    type: object
  service.CreateVideoSourceRequest:
    properties:
      description:
        type: string
      name:
        type: string
      password:
        type: string
      stream_id:
        type: string
      type:
        $ref: '#/definitions/models.VideoSourceType'
      url:
        description: 流类型必需，文件类型可选
        type: string
      user_id:
        type: integer
      username:
        type: string
      video_file_id:
        description: 文件类型视频源关联的文件ID
        type: integer
    required:
    - name
    - type
    - user_id
    type: object
  service.DependencyCheckResult:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      checked_at:
        type: string
      is_available:
        type: boolean
      issues:
        items:
          $ref: '#/definitions/service.DependencyIssue'
        type: array
      required_model:
        type: string
      status:
        $ref: '#/definitions/service.DependencyStatus'
      suggestions:
        items:
          type: string
        type: array
      task_id:
        type: integer
      task_name:
        type: string
    type: object
  service.DependencyIssue:
    properties:
      description:
        type: string
      severity:
        $ref: '#/definitions/service.Severity'
      solution:
        type: string
      type:
        $ref: '#/definitions/service.IssueType'
    type: object
  service.DependencyStatus:
    enum:
    - satisfied
    - missing
    - incompatible
    - deploying
    - error
    type: string
    x-enum-comments:
      DependencyStatusDeploying: 正在部署
      DependencyStatusError: 错误状态
      DependencyStatusIncompatible: 不兼容
      DependencyStatusMissing: 模型缺失
      DependencyStatusSatisfied: 依赖满足
    x-enum-descriptions:
    - 依赖满足
    - 模型缺失
    - 不兼容
    - 正在部署
    - 错误状态
    x-enum-varnames:
    - DependencyStatusSatisfied
    - DependencyStatusMissing
    - DependencyStatusIncompatible
    - DependencyStatusDeploying
    - DependencyStatusError
  service.DeployStatus:
    enum:
    - not_deployed
    - deploying
    - deployed
    - failed
    - outdated
    type: string
    x-enum-comments:
      DeployStatusDeployed: 已部署
      DeployStatusDeploying: 正在部署
      DeployStatusFailed: 部署失败
      DeployStatusNotDeployed: 未部署
      DeployStatusOutdated: 版本过期
    x-enum-descriptions:
    - 未部署
    - 正在部署
    - 已部署
    - 部署失败
    - 版本过期
    x-enum-varnames:
    - DeployStatusNotDeployed
    - DeployStatusDeploying
    - DeployStatusDeployed
    - DeployStatusFailed
    - DeployStatusOutdated
  service.DeploymentProgress:
    properties:
      completed_tasks:
        type: integer
      deployment_id:
        type: integer
      estimated_time:
        type: string
      failed_tasks:
        type: integer
      message:
        type: string
      progress:
        type: number
      skipped_tasks:
        type: integer
      total_tasks:
        type: integer
    type: object
  service.DeploymentRecord:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      deployed_at:
        type: string
      status:
        $ref: '#/definitions/service.DeployStatus'
    type: object
  service.DeploymentResult:
    properties:
      box_id:
        type: integer
      completed_at:
        type: string
      error_message:
        type: string
      model_key:
        type: string
      progress:
        type: number
      started_at:
        type: string
      status:
        $ref: '#/definitions/service.DeployStatus'
      total_bytes:
        type: integer
      transferred_bytes:
        type: integer
    type: object
  service.DeploymentStatus:
    properties:
      box_id:
        type: integer
      checksum:
        type: string
      deployed_at:
        type: string
      file_path:
        type: string
      file_size:
        type: integer
      last_checked_at:
        type: string
      model_key:
        type: string
      status:
        $ref: '#/definitions/service.DeployStatus'
      version:
        type: string
    type: object
  service.FrameImageInfo:
    properties:
      content_type:
        type: string
      file_name:
        type: string
      file_path:
        type: string
      file_size:
        type: integer
      format:
        type: string
      height:
        type: integer
      timestamp:
        type: string
      width:
        type: integer
    type: object
  service.GetLogsResponse:
    properties:
      logs:
        items:
          $ref: '#/definitions/models.SystemLog'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  service.GetModelListResponse:
    properties:
      models:
        items:
          $ref: '#/definitions/models.OriginalModel'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  service.IssueType:
    enum:
    - model_not_found
    - version_mismatch
    - hardware_incompatible
    - insufficient_resource
    - deployment_failed
    type: string
    x-enum-comments:
      IssueTypeDeploymentFailed: 部署失败
      IssueTypeHardwareIncompatible: 硬件不兼容
      IssueTypeInsufficientResource: 资源不足
      IssueTypeModelNotFound: 模型未找到
      IssueTypeVersionMismatch: 版本不匹配
    x-enum-descriptions:
    - 模型未找到
    - 版本不匹配
    - 硬件不兼容
    - 资源不足
    - 部署失败
    x-enum-varnames:
    - IssueTypeModelNotFound
    - IssueTypeVersionMismatch
    - IssueTypeHardwareIncompatible
    - IssueTypeInsufficientResource
    - IssueTypeDeploymentFailed
  service.ModelRequirements:
    properties:
      min_framework_version:
        type: string
      min_memory_gb:
        type: number
      min_storage_gb:
        type: number
      required_gpu:
        type: boolean
      supported_frameworks:
        items:
          type: string
        type: array
    type: object
  service.ModelStatisticsResponse:
    properties:
      by_status:
        additionalProperties:
          format: int64
          type: integer
        type: object
      by_type:
        additionalProperties:
          format: int64
          type: integer
        type: object
      public:
        type: integer
      total:
        type: integer
      total_downloads:
        type: integer
    type: object
  service.ModelUsageStats:
    properties:
      active_tasks:
        type: integer
      deployed_boxes:
        type: integer
      deployment_history:
        items:
          $ref: '#/definitions/service.DeploymentRecord'
        type: array
      last_used_at:
        type: string
      model_key:
        type: string
      total_boxes:
        type: integer
      total_tasks:
        type: integer
      usage_by_box:
        additionalProperties:
          type: integer
        type: object
    type: object
  service.RecordTaskStatistics:
    properties:
      completed_count:
        type: integer
      failed_count:
        type: integer
      pending_count:
        type: integer
      recording_count:
        type: integer
      stopped_count:
        type: integer
      total_count:
        type: integer
    type: object
  service.ScanTask:
    properties:
      created_by:
        type: integer
      current_ip:
        type: string
      end_time:
        type: string
      error_message:
        type: string
      found_boxes:
        type: integer
      ip_range:
        type: string
      port:
        type: integer
      progress:
        type: number
      scan_id:
        type: string
      scanned_ips:
        type: integer
      start_time:
        type: string
      status:
        description: scanning, completed, failed, cancelled
        type: string
      total_ips:
        type: integer
      update_time:
        type: string
    type: object
  service.ScheduleResult:
    properties:
      failed_tasks:
        type: integer
      scheduled_tasks:
        type: integer
      summary:
        additionalProperties:
          type: integer
        type: object
      task_results:
        items:
          $ref: '#/definitions/service.TaskScheduleResult'
        type: array
      total_tasks:
        type: integer
    type: object
  service.ScreenshotResponse:
    properties:
      base64_data:
        description: 图片的base64编码
        type: string
      content_type:
        description: 内容类型，如image/jpeg
        type: string
      file_size:
        description: 文件大小（字节）
        type: integer
      height:
        description: 图片高度
        type: integer
      timestamp:
        description: 截图时间戳
        type: string
      width:
        description: 图片宽度
        type: integer
    type: object
  service.SearchModelResponse:
    properties:
      models:
        items:
          $ref: '#/definitions/models.OriginalModel'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  service.Severity:
    enum:
    - low
    - medium
    - high
    - critical
    type: string
    x-enum-comments:
      SeverityCritical: 严重
      SeverityHigh: 高
      SeverityLow: 低
      SeverityMedium: 中
    x-enum-descriptions:
    - 低
    - 中
    - 高
    - 严重
    x-enum-varnames:
    - SeverityLow
    - SeverityMedium
    - SeverityHigh
    - SeverityCritical
  service.StorageStatisticsResponse:
    properties:
      by_storage_class:
        additionalProperties:
          additionalProperties:
            format: int64
            type: integer
          type: object
        type: object
      by_type:
        additionalProperties:
          additionalProperties:
            format: int64
            type: integer
          type: object
        type: object
      total_size:
        type: integer
    type: object
  service.TaskScheduleResult:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      candidates:
        items:
          $ref: '#/definitions/service.BoxScore'
        type: array
      reason:
        type: string
      score:
        type: number
      success:
        type: boolean
      task_id:
        type: integer
      task_name:
        type: string
    type: object
  service.TaskSyncDetail:
    properties:
      action:
        description: created, updated, skipped, error
        type: string
      error:
        type: string
      external_id:
        type: string
      status:
        type: string
      task_id:
        type: string
      task_name:
        type: string
    type: object
  service.TaskSyncResult:
    properties:
      box_id:
        type: integer
      box_name:
        type: string
      details:
        items:
          $ref: '#/definitions/service.TaskSyncDetail'
        type: array
      error_tasks:
        type: integer
      skipped_tasks:
        type: integer
      sync_time:
        type: string
      synced_tasks:
        type: integer
      total_tasks:
        type: integer
      updated_tasks:
        type: integer
    type: object
  service.UpdateConvertedModelRequest:
    properties:
      description:
        type: string
      display_name:
        type: string
      tags:
        items:
          type: string
        type: array
    type: object
  service.UpdateModelRequest:
    properties:
      author:
        type: string
      description:
        type: string
      framework:
        type: string
      input_channels:
        type: integer
      input_height:
        type: integer
      input_width:
        type: integer
      model_type:
        $ref: '#/definitions/models.OriginalModelType'
      model_url:
        type: string
      name:
        type: string
      tags:
        items:
          type: string
        type: array
      task_type:
        $ref: '#/definitions/models.ModelTaskType'
    type: object
  service.UpdateVideoFileRequest:
    properties:
      description:
        type: string
      display_name:
        type: string
      name:
        type: string
    type: object
  service.UpdateVideoSourceRequest:
    properties:
      description:
        type: string
      name:
        type: string
      password:
        type: string
      stream_id:
        type: string
      url:
        type: string
      username:
        type: string
      video_file_id:
        description: 指向指针的指针，支持设置为null
        type: integer
    type: object
info:
  contact: {}
  description: AI盒子管理系统后端服务，提供盒子管理、模型管理、任务管理、用户管理等功能
  title: AI盒子管理系统 API
  version: "1.0"
paths:
  /api/conversion/statistics:
    get:
      consumes:
      - application/json
      description: 获取转换任务的统计信息
      parameters:
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ConversionStatistics'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换统计
      tags:
      - 模型转换
  /api/conversion/tasks:
    get:
      consumes:
      - application/json
      description: 分页获取转换任务列表，支持多条件搜索
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务状态
        enum:
        - pending
        - running
        - completed
        - failed
        in: query
        name: status
        type: string
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 原始模型ID
        in: query
        name: original_model_id
        type: integer
      - description: 搜索关键词
        in: query
        name: keyword
        type: string
      - description: 目标芯片
        enum:
        - bm1684
        - bm1684x
        - bm1688
        in: query
        name: target_chip
        type: string
      - description: 开始时间（RFC3339格式）
        in: query
        name: start_time
        type: string
      - description: 结束时间（RFC3339格式）
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConversionTask'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换任务列表
      tags:
      - 模型转换
    post:
      consumes:
      - application/json
      description: 创建新的模型转换任务
      parameters:
      - description: 转换任务信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.CreateConversionTaskRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConversionTask'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 创建转换任务
      tags:
      - 模型转换
  /api/conversion/tasks/{taskId}:
    delete:
      consumes:
      - application/json
      description: 删除指定的转换任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除转换任务
      tags:
      - 模型转换
    get:
      consumes:
      - application/json
      description: 根据任务ID获取转换任务详情
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ConversionTask'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换任务详情
      tags:
      - 模型转换
  /api/conversion/tasks/{taskId}/logs:
    get:
      consumes:
      - application/json
      description: 获取转换任务的执行日志
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换日志
      tags:
      - 模型转换
  /api/conversion/tasks/{taskId}/progress:
    get:
      consumes:
      - application/json
      description: 获取转换任务的当前进度
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ConversionProgress'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换进度
      tags:
      - 模型转换
  /api/conversion/tasks/{taskId}/start:
    post:
      consumes:
      - application/json
      description: 手动启动指定的转换任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 手动启动转换
      tags:
      - 模型转换
  /api/conversion/tasks/{taskId}/stop:
    post:
      consumes:
      - application/json
      description: 停止正在运行的转换任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 停止转换
      tags:
      - 模型转换
  /api/converted-models:
    get:
      consumes:
      - application/json
      description: 分页获取转换后模型列表，支持多条件搜索
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 模型状态
        enum:
        - active
        - inactive
        - failed
        in: query
        name: status
        type: string
      - description: 目标芯片
        enum:
        - bm1684
        - bm1684x
        - bm1688
        in: query
        name: target_chip
        type: string
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 原始模型ID
        in: query
        name: original_model_id
        type: integer
      - description: 标签（逗号分隔）
        in: query
        name: tags
        type: string
      - description: 模型名称搜索关键词
        in: query
        name: name
        type: string
      - description: 版本搜索关键词
        in: query
        name: version
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConvertedModel'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换后模型列表
      tags:
      - 转换后模型
    post:
      consumes:
      - application/json
      description: 创建新的转换后模型记录
      parameters:
      - description: 转换后模型信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.CreateConvertedModelRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ConvertedModel'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 创建转换后模型
      tags:
      - 转换后模型
  /api/converted-models/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的转换后模型
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除转换后模型
      tags:
      - 转换后模型
    get:
      consumes:
      - application/json
      description: 根据ID获取转换后模型详情
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ConvertedModel'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换后模型详情
      tags:
      - 转换后模型
    put:
      consumes:
      - application/json
      description: 更新转换后模型信息
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.UpdateConvertedModelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 更新转换后模型
      tags:
      - 转换后模型
  /api/converted-models/{id}/deployments:
    get:
      consumes:
      - application/json
      description: 根据转换后模型ID获取其在哪些盒子上已部署
      parameters:
      - description: 转换后模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ModelBoxDeployment'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换后模型的部署信息
      tags:
      - 转换后模型
  /api/converted-models/{id}/download:
    get:
      consumes:
      - application/json
      description: 下载转换后模型文件
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: 模型文件
          schema:
            type: file
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 下载转换后模型
      tags:
      - 转换后模型
  /api/converted-models/key/{modelKey}/deployments:
    get:
      consumes:
      - application/json
      description: 根据模型Key获取其在哪些盒子上已部署
      parameters:
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ModelBoxDeployment'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 根据模型Key获取部署信息
      tags:
      - 转换后模型
  /api/converted-models/original/{originalModelId}:
    get:
      consumes:
      - application/json
      description: 根据原始模型ID获取相关的转换后模型列表
      parameters:
      - description: 原始模型ID
        in: path
        name: originalModelId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConvertedModel'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 根据原始模型获取转换后模型
      tags:
      - 转换后模型
  /api/converted-models/search:
    get:
      consumes:
      - application/json
      description: 根据关键词搜索转换后模型
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - description: 目标芯片
        in: query
        name: target_chip
        type: string
      - description: 模型状态
        in: query
        name: status
        type: string
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConvertedModel'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 搜索转换后模型
      tags:
      - 转换后模型
  /api/converted-models/statistics:
    get:
      consumes:
      - application/json
      description: 获取转换后模型的统计信息
      parameters:
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ConvertedModelStatistics'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取转换后模型统计
      tags:
      - 转换后模型
  /api/models:
    get:
      description: 获取模型列表，支持分页和筛选
      parameters:
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 模型类型
        enum:
        - pt
        - onnx
        - pth
        in: query
        name: model_type
        type: string
      - description: 模型状态
        in: query
        name: status
        type: string
      - collectionFormat: csv
        description: 标签列表
        in: query
        items:
          type: string
        name: tags
        type: array
      - description: 模型名称搜索关键词
        in: query
        name: name
        type: string
      - description: 框架类型
        enum:
        - pytorch
        - onnx
        - tensorflow
        in: query
        name: framework
        type: string
      - description: AI任务类型
        enum:
        - detection
        - segmentation
        - classification
        in: query
        name: task_type
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - default: created_at
        description: 排序字段
        in: query
        name: sort_field
        type: string
      - default: desc
        description: 排序方向
        enum:
        - asc
        - desc
        in: query
        name: sort_order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.GetModelListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取模型列表
      tags:
      - 模型管理
  /api/models/{id}:
    delete:
      description: 软删除模型记录
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除模型
      tags:
      - 模型管理
    get:
      description: 根据模型ID获取详细信息
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.OriginalModel'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取模型详情
      tags:
      - 模型管理
    put:
      consumes:
      - application/json
      description: 更新模型的基本信息，包括AI任务相关参数
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.UpdateModelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 更新模型信息
      tags:
      - 模型管理
  /api/models/{id}/download:
    get:
      description: 下载模型文件，支持大文件和错误恢复
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 下载模型文件
      tags:
      - 模型管理
  /api/models/{id}/validate:
    post:
      description: 验证模型文件的完整性和格式
      parameters:
      - description: 模型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 验证模型
      tags:
      - 模型管理
  /api/models/search:
    get:
      description: 根据关键词搜索模型
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 模型类型
        in: query
        name: model_type
        type: string
      - collectionFormat: csv
        description: 标签列表
        in: query
        items:
          type: string
        name: tags
        type: array
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.SearchModelResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 搜索模型
      tags:
      - 模型管理
  /api/models/statistics:
    get:
      description: 获取模型的各种统计数据
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ModelStatisticsResponse'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取模型统计信息
      tags:
      - 模型管理
  /api/models/storage/statistics:
    get:
      description: 获取存储空间使用情况
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.StorageStatisticsResponse'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取存储统计信息
      tags:
      - 模型管理
  /api/models/upload:
    post:
      consumes:
      - multipart/form-data
      description: 直接上传模型文件，支持.pt、.onnx、.pth等格式
      parameters:
      - description: 模型文件
        in: formData
        name: file
        required: true
        type: file
      - description: 模型名称
        in: formData
        name: name
        required: true
        type: string
      - description: 模型版本
        in: formData
        name: version
        required: true
        type: string
      - description: 模型类型
        enum:
        - pt
        - onnx
        - pth
        in: formData
        name: model_type
        required: true
        type: string
      - description: 框架类型
        enum:
        - pytorch
        - onnx
        - tensorflow
        in: formData
        name: framework
        required: true
        type: string
      - description: 模型描述
        in: formData
        name: description
        type: string
      - description: 标签列表，逗号分隔
        in: formData
        name: tags
        type: string
      - default: detection
        description: AI任务类型
        enum:
        - detection
        - segmentation
        - classification
        in: formData
        name: task_type
        type: string
      - default: 640
        description: 输入宽度
        in: formData
        name: input_width
        type: integer
      - default: 640
        description: 输入高度
        in: formData
        name: input_height
        type: integer
      - default: 3
        description: 输入通道数
        in: formData
        name: input_channels
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.OriginalModel'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 内部服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 上传模型文件
      tags:
      - 模型管理
  /api/models/versions:
    get:
      description: 根据模型名称获取所有版本
      parameters:
      - description: 模型名称
        in: query
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.OriginalModel'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取模型版本列表
      tags:
      - 模型管理
  /api/sse/batch-deployments:
    get:
      consumes:
      - text/event-stream
      description: 建立批量部署任务状态变化的SSE连接，实时接收批量部署进度、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 批量部署事件流
      tags:
      - SSE事件流
  /api/sse/boxes:
    get:
      consumes:
      - text/event-stream
      description: 建立盒子状态变化的SSE连接，实时接收盒子上线、离线等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 盒子事件流
      tags:
      - SSE事件流
  /api/sse/close-all:
    post:
      consumes:
      - application/json
      description: 强制关闭所有活跃的SSE连接（管理员功能）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 关闭所有SSE连接
      tags:
      - SSE事件流
  /api/sse/conversion:
    get:
      consumes:
      - text/event-stream
      description: 建立转换相关事件的SSE连接，实时接收转换开始、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 转换事件流
      tags:
      - SSE事件流
  /api/sse/deployment-tasks:
    get:
      consumes:
      - text/event-stream
      description: 建立AI推理任务部署状态变化的SSE连接，实时接收任务创建、部署、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 部署任务事件流
      tags:
      - SSE事件流
  /api/sse/discovery:
    get:
      consumes:
      - text/event-stream
      description: 建立盒子扫描发现的SSE连接，实时接收扫描进度和发现结果
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 盒子扫描发现事件流
      tags:
      - SSE事件流
  /api/sse/extract-tasks:
    get:
      consumes:
      - text/event-stream
      description: 建立抽帧任务状态变化的SSE连接，实时接收抽帧任务创建、开始、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 抽帧任务事件流
      tags:
      - SSE事件流
  /api/sse/model-deployments:
    get:
      consumes:
      - text/event-stream
      description: 建立模型部署任务状态变化的SSE连接，实时接收模型部署进度、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 模型部署任务事件流
      tags:
      - SSE事件流
  /api/sse/models:
    get:
      consumes:
      - text/event-stream
      description: 建立模型相关事件的SSE连接，实时接收模型部署等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 模型事件流
      tags:
      - SSE事件流
  /api/sse/record-tasks:
    get:
      consumes:
      - text/event-stream
      description: 建立录制任务状态变化的SSE连接，实时接收录制任务创建、开始、完成、失败等事件
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 录制任务事件流
      tags:
      - SSE事件流
  /api/sse/stats:
    get:
      consumes:
      - application/json
      description: 获取当前活跃的SSE连接统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ConnectionStats'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取SSE连接统计
      tags:
      - SSE事件流
  /api/sse/system:
    get:
      consumes:
      - text/event-stream
      description: 建立系统错误事件的SSE连接，实时接收系统级错误通知
      parameters:
      - description: 用户ID，用于过滤用户相关事件
        in: query
        name: user_id
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE事件流
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 系统事件流
      tags:
      - SSE事件流
  /api/v1/auto-scheduler/start:
    post:
      consumes:
      - application/json
      description: 启动自动调度器，开始定时调度任务
      produces:
      - application/json
      responses:
        "200":
          description: 启动成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 调度器已在运行
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 启动失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 启动自动调度器
      tags:
      - 自动调度
  /api/v1/auto-scheduler/status:
    get:
      consumes:
      - application/json
      description: 获取自动调度器的当前运行状态
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.AutoSchedulerStatusResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 获取自动调度器状态
      tags:
      - 自动调度
  /api/v1/auto-scheduler/stop:
    post:
      consumes:
      - application/json
      description: 停止自动调度器
      produces:
      - application/json
      responses:
        "200":
          description: 停止成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 调度器未运行
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 停止失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 停止自动调度器
      tags:
      - 自动调度
  /api/v1/auto-scheduler/trigger:
    post:
      consumes:
      - application/json
      description: 手动触发一次调度，可选择指定策略
      parameters:
      - description: 触发请求
        in: body
        name: request
        schema:
          $ref: '#/definitions/controllers.TriggerScheduleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 调度完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.AutoScheduleResultResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 调度失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 手动触发调度
      tags:
      - 自动调度
  /api/v1/auto-scheduler/trigger/{id}:
    post:
      consumes:
      - application/json
      description: 使用指定的调度策略触发一次调度
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 调度完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.AutoScheduleResultResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: 策略不存在
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 调度失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 使用指定策略触发调度
      tags:
      - 自动调度
  /api/v1/box-client/health:
    get:
      description: 供盒子端检查管理端是否在线
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 健康检查
      tags:
      - 盒子客户端
  /api/v1/box-client/heartbeat:
    post:
      consumes:
      - application/json
      description: 接收盒子端发送的心跳数据，更新盒子状态并触发任务同步
      parameters:
      - description: 心跳数据
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.BoxHeartbeatRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.BoxHeartbeatResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 接收盒子心跳
      tags:
      - 盒子客户端
  /api/v1/box-client/time:
    get:
      description: 获取管理端服务器当前时间，供盒子同步
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取服务器时间
      tags:
      - 盒子客户端
  /api/v1/boxes:
    get:
      description: 获取AI盒子列表，支持分页和筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: size
        type: integer
      - description: 盒子状态
        enum:
        - online
        - offline
        - error
        - upgrading
        in: query
        name: status
        type: string
      - description: 盒子名称搜索关键词
        in: query
        name: name
        type: string
      - description: 盒子位置搜索关键词
        in: query
        name: location
        type: string
      - description: 标签搜索，多个标签用逗号分隔
        in: query
        name: tags
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/controllers.BoxResponse'
                  type: array
              type: object
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子列表
      tags:
      - 盒子管理
    post:
      consumes:
      - application/json
      description: 手动添加AI盒子到系统
      parameters:
      - description: 添加盒子请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.AddBoxRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BoxResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 手动添加盒子
      tags:
      - 盒子管理
  /api/v1/boxes/{id}:
    delete:
      description: 删除指定的AI盒子
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除盒子
      tags:
      - 盒子管理
    get:
      description: 获取指定AI盒子的详细信息
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BoxResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子详情
      tags:
      - 盒子管理
    put:
      consumes:
      - application/json
      description: 更新指定AI盒子的基本信息
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新盒子请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateBoxRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BoxResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 更新盒子信息
      tags:
      - 盒子管理
  /api/v1/boxes/{id}/models:
    get:
      description: 获取指定盒子上的AI模型列表
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data: {}
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子模型列表
      tags:
      - 盒子代理
  /api/v1/boxes/{id}/refresh:
    post:
      description: 手动刷新指定盒子的状态信息
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 手动刷新盒子状态
      tags:
      - 盒子监控
  /api/v1/boxes/{id}/rollback:
    post:
      consumes:
      - application/json
      description: 将指定盒子回滚到之前的版本
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      - description: 回滚请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.RollbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradeTaskResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 回滚盒子版本
      tags:
      - 升级管理
  /api/v1/boxes/{id}/status:
    get:
      description: 获取指定盒子的实时状态信息
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data: {}
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子实时状态
      tags:
      - 盒子监控
  /api/v1/boxes/{id}/status/history:
    get:
      description: 获取指定盒子的历史状态数据
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      - description: 开始时间
        format: date-time
        in: query
        name: start_time
        type: string
      - description: 结束时间
        format: date-time
        in: query
        name: end_time
        type: string
      - default: 100
        description: 记录数量限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.BoxHeartbeat'
                  type: array
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子状态历史
      tags:
      - 盒子监控
  /api/v1/boxes/{id}/sync-tasks:
    post:
      consumes:
      - application/json
      description: 一键同步指定盒子的所有任务到管理端，操作是幂等的
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 同步成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.TaskSyncResult'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: 盒子不存在
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 内部服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 同步盒子任务
      tags:
      - 盒子管理
  /api/v1/boxes/{id}/tasks:
    get:
      description: 获取指定盒子上的推理任务列表
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data: {}
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子任务列表
      tags:
      - 盒子代理
  /api/v1/boxes/{id}/upgrade:
    post:
      consumes:
      - application/json
      description: 对指定盒子执行软件升级，使用升级包ID
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: integer
      - description: 升级请求（包含升级包ID）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.UpgradeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradeTaskResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 升级单个盒子
      tags:
      - 升级管理
  /api/v1/boxes/batch/upgrade:
    post:
      consumes:
      - application/json
      description: 对多个盒子执行批量软件升级，使用升级包ID
      parameters:
      - description: 批量升级请求（包含升级包ID）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchUpgradeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BatchUpgradeTaskResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 批量升级盒子
      tags:
      - 升级管理
  /api/v1/boxes/discover:
    post:
      consumes:
      - application/json
      description: 在指定IP范围内异步自动发现AI盒子，立即返回扫描任务ID，可通过SSE监听进度
      parameters:
      - description: 发现盒子请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.DiscoverBoxesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.DiscoverBoxesResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 自动发现盒子
      tags:
      - 盒子管理
  /api/v1/boxes/discover/{scan_id}:
    get:
      description: 获取指定扫描任务的详细状态信息
      parameters:
      - description: 扫描任务ID
        in: path
        name: scan_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ScanTask'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取扫描任务状态
      tags:
      - 盒子管理
  /api/v1/boxes/discover/{scan_id}/cancel:
    post:
      description: 取消正在进行的扫描任务
      parameters:
      - description: 扫描任务ID
        in: path
        name: scan_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 取消扫描任务
      tags:
      - 盒子管理
  /api/v1/boxes/overview:
    get:
      description: 获取所有盒子的概览统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data: {}
              type: object
      summary: 获取盒子概览统计
      tags:
      - 盒子监控
  /api/v1/dependencies/boxes/{boxId}/models:
    get:
      description: 获取指定盒子上所有已部署的模型
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/service.BoxModel'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取盒子模型列表
      tags:
      - 模型依赖
  /api/v1/dependencies/boxes/{boxId}/models/{modelKey}/compatibility:
    get:
      description: 检查指定盒子是否兼容指定的模型
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.CompatibilityResult'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 检查盒子模型兼容性
      tags:
      - 模型依赖
  /api/v1/dependencies/boxes/{boxId}/models/{modelKey}/deploy:
    post:
      description: 将指定模型部署到指定盒子
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.DeploymentResult'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 部署模型到盒子
      tags:
      - 模型依赖
  /api/v1/dependencies/boxes/{boxId}/models/{modelKey}/ensure:
    post:
      description: 确保指定模型在指定盒子上可用，如果未部署则自动部署
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 确保模型可用
      tags:
      - 模型依赖
  /api/v1/dependencies/boxes/{boxId}/models/{modelKey}/status:
    get:
      description: 获取指定模型在指定盒子上的部署状态
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.DeploymentStatus'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取模型部署状态
      tags:
      - 模型依赖
  /api/v1/dependencies/models/{modelKey}/usage:
    get:
      description: 获取指定模型的使用情况统计
      parameters:
      - description: 模型Key
        in: path
        name: modelKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ModelUsageStats'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取模型使用情况
      tags:
      - 模型依赖
  /api/v1/dependencies/tasks/{taskId}/check:
    get:
      description: 检查任务所需的模型是否在目标盒子或任何兼容盒子上可用
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.DependencyCheckResult'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 检查任务模型依赖
      tags:
      - 模型依赖
  /api/v1/deployments:
    get:
      consumes:
      - application/json
      description: 获取部署任务列表，支持按状态等条件筛选
      parameters:
      - description: 部署状态筛选
        enum:
        - pending
        - running
        - completed
        - failed
        - cancelled
        in: query
        name: status
        type: string
      - description: 创建者用户ID
        in: query
        name: created_by
        type: integer
      - description: 优先级筛选
        in: query
        name: priority
        type: integer
      - description: 关键词搜索
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署任务列表成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.DeploymentTask'
                  type: array
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署任务列表
      tags:
      - 部署管理
    post:
      consumes:
      - application/json
      description: 创建一个新的部署任务，用于管理单个或多个任务的部署过程
      parameters:
      - description: 部署任务配置
        in: body
        name: deployment
        required: true
        schema:
          $ref: '#/definitions/controllers.CreateDeploymentTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 部署任务创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.DeploymentTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 创建部署任务
      tags:
      - 部署管理
  /api/v1/deployments/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的部署任务，如果任务正在运行会先取消
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 部署任务删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除部署任务
      tags:
      - 部署管理
    get:
      consumes:
      - application/json
      description: 根据ID获取部署任务的详细信息
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署任务详情成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.DeploymentTask'
              type: object
        "400":
          description: 部署任务ID不能为空
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署任务详情
      tags:
      - 部署管理
  /api/v1/deployments/{id}/cancel:
    post:
      consumes:
      - application/json
      description: 取消指定的部署任务
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 取消原因
        in: body
        name: cancel
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 部署任务取消成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 取消部署任务
      tags:
      - 部署管理
  /api/v1/deployments/{id}/logs:
    get:
      consumes:
      - application/json
      description: 获取指定部署任务的执行日志
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      - default: 100
        description: 日志条数限制
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署任务日志成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.DeploymentLog'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署任务日志
      tags:
      - 部署管理
  /api/v1/deployments/{id}/progress:
    get:
      consumes:
      - application/json
      description: 获取指定部署任务的执行进度
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署任务进度成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.DeploymentProgress'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署任务进度
      tags:
      - 部署管理
  /api/v1/deployments/{id}/results:
    get:
      consumes:
      - application/json
      description: 获取指定部署任务的执行结果
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署任务结果成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.DeploymentResult'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署任务结果
      tags:
      - 部署管理
  /api/v1/deployments/{id}/start:
    post:
      consumes:
      - application/json
      description: 启动指定的部署任务
      parameters:
      - description: 部署任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 部署任务启动成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误或任务状态不允许启动
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 部署任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 开始执行部署任务
      tags:
      - 部署管理
  /api/v1/deployments/batch:
    post:
      consumes:
      - application/json
      description: 批量创建部署任务，将多个任务部署到多个盒子
      parameters:
      - description: 批量部署配置
        in: body
        name: batch
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchDeploymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 批量部署创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.DeploymentTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 批量创建部署
      tags:
      - 部署管理
  /api/v1/deployments/cleanup:
    post:
      consumes:
      - application/json
      description: 清理指定时间之前完成的部署任务
      parameters:
      - default: 30
        description: 保留天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 清理任务成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 清理旧任务
      tags:
      - 部署管理
  /api/v1/deployments/statistics:
    get:
      consumes:
      - application/json
      description: 获取部署任务的统计信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取部署统计成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取部署统计
      tags:
      - 部署管理
  /api/v1/model-deployment/tasks:
    get:
      consumes:
      - application/json
      description: 获取用户的模型部署任务列表
      parameters:
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ModelDeploymentTask'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取部署任务列表
      tags:
      - 模型部署
    post:
      consumes:
      - application/json
      description: 创建新的模型部署任务，将转换后模型部署到指定盒子
      parameters:
      - description: 部署任务信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.CreateModelDeploymentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ModelDeploymentTask'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 创建模型部署任务
      tags:
      - 模型部署
  /api/v1/model-deployment/tasks/{taskId}:
    delete:
      consumes:
      - application/json
      description: 删除指定的部署任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除部署任务
      tags:
      - 模型部署
    get:
      consumes:
      - application/json
      description: 根据任务ID获取部署任务详情
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ModelDeploymentTask'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取部署任务详情
      tags:
      - 模型部署
  /api/v1/model-deployment/tasks/{taskId}/cancel:
    post:
      consumes:
      - application/json
      description: 取消正在运行的部署任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 取消部署任务
      tags:
      - 模型部署
  /api/v1/model-deployment/tasks/{taskId}/items:
    get:
      consumes:
      - application/json
      description: 获取指定任务的部署项列表
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ModelDeploymentItem'
                  type: array
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取部署项列表
      tags:
      - 模型部署
  /api/v1/model-deployment/tasks/{taskId}/start:
    post:
      consumes:
      - application/json
      description: 启动指定的部署任务
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 启动部署任务
      tags:
      - 模型部署
  /api/v1/schedule-policies:
    get:
      consumes:
      - application/json
      description: 获取所有调度策略列表，支持分页
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 是否启用
        in: query
        name: is_enabled
        type: boolean
      - description: 策略类型
        in: query
        name: policy_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulePolicyListResponse'
              type: object
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取调度策略列表
      tags:
      - 调度策略
    post:
      consumes:
      - application/json
      description: 创建新的调度策略
      parameters:
      - description: 创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.CreateSchedulePolicyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulePolicyResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 创建调度策略
      tags:
      - 调度策略
  /api/v1/schedule-policies/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的调度策略
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 删除调度策略
      tags:
      - 调度策略
    get:
      consumes:
      - application/json
      description: 根据ID获取调度策略详情
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulePolicyResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: 策略不存在
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取单个调度策略
      tags:
      - 调度策略
    put:
      consumes:
      - application/json
      description: 更新调度策略配置
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateSchedulePolicyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulePolicyResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: 策略不存在
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 更新调度策略
      tags:
      - 调度策略
  /api/v1/schedule-policies/{id}/disable:
    post:
      consumes:
      - application/json
      description: 禁用指定的调度策略
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 禁用成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 禁用调度策略
      tags:
      - 调度策略
  /api/v1/schedule-policies/{id}/enable:
    post:
      consumes:
      - application/json
      description: 启用指定的调度策略
      parameters:
      - description: 策略ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 启用成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 启用调度策略
      tags:
      - 调度策略
  /api/v1/schedule-policies/defaults:
    post:
      consumes:
      - application/json
      description: 创建指定类型的默认调度策略
      parameters:
      - description: 策略类型 (priority|load_balance|resource_match)
        in: query
        name: type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulePolicyResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 创建默认调度策略
      tags:
      - 调度策略
  /api/v1/schedule-policies/statistics:
    get:
      consumes:
      - application/json
      description: 获取调度策略的统计信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取调度策略统计
      tags:
      - 调度策略
  /api/v1/scheduler/find-best-box/{taskId}:
    get:
      description: 根据任务的亲和性标签和资源需求，查找所有兼容的盒子并评分
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/controllers.BoxScoreResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 查找最佳盒子
      tags:
      - 任务调度
  /api/v1/scheduler/queue/status:
    get:
      description: 获取任务调度器的当前状态和统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SchedulerStatusResponse'
              type: object
      summary: 获取调度器状态
      tags:
      - 任务调度
  /api/v1/scheduler/schedule/{taskId}:
    post:
      consumes:
      - application/json
      description: 根据任务的亲和性标签和盒子资源，调度任务到最合适的盒子
      parameters:
      - description: 任务ID
        in: path
        name: taskId
        required: true
        type: integer
      - description: 调度参数
        in: body
        name: request
        schema:
          $ref: '#/definitions/controllers.ScheduleTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.ScheduleTaskResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 调度单个任务到合适的盒子
      tags:
      - 任务调度
  /api/v1/scheduler/schedule/pending:
    post:
      description: 自动调度所有启用自动调度且处于待处理状态的任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.ScheduleAllResponse'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 调度所有待处理任务
      tags:
      - 任务调度
  /api/v1/scheduler/start:
    post:
      description: 启动任务执行器，开始接受任务调度
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 启动调度器
      tags:
      - 任务调度
  /api/v1/scheduler/stop:
    post:
      description: 停止任务执行器，暂停任务调度
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 停止调度器
      tags:
      - 任务调度
  /api/v1/system-config:
    get:
      consumes:
      - application/json
      description: 获取所有系统配置的聚合视图
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.AllSystemConfigs'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取所有系统配置
      tags:
      - 系统配置
  /api/v1/system-config/batch:
    put:
      consumes:
      - application/json
      description: 批量更新多个配置项
      parameters:
      - description: 配置键值对
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchUpdateConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 批量更新配置
      tags:
      - 系统配置
  /api/v1/system-config/defaults:
    get:
      consumes:
      - application/json
      description: 获取系统默认配置值（不影响当前配置）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.AllSystemConfigs'
              type: object
      summary: 获取默认配置
      tags:
      - 系统配置
  /api/v1/system-config/key/{key}:
    get:
      consumes:
      - application/json
      description: 获取指定键的配置值
      parameters:
      - description: 配置键
        in: path
        name: key
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data: {}
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 根据键获取配置
      tags:
      - 系统配置
    put:
      consumes:
      - application/json
      description: 更新指定键的配置值
      parameters:
      - description: 配置键
        in: path
        name: key
        required: true
        type: string
      - description: 配置值
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 更新单个配置
      tags:
      - 系统配置
  /api/v1/system-config/key/{key}/reset:
    post:
      consumes:
      - application/json
      description: 将指定配置项重置为系统默认值
      parameters:
      - description: 配置键
        in: path
        name: key
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 重置配置为默认值
      tags:
      - 系统配置
  /api/v1/system-config/metadata:
    get:
      consumes:
      - application/json
      description: 获取所有配置项的元数据信息，包括名称、描述、类型、验证规则等
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ConfigMetadata'
                  type: array
              type: object
      summary: 获取配置元数据
      tags:
      - 系统配置
  /api/v1/system-config/refresh-cache:
    post:
      consumes:
      - application/json
      description: 刷新系统配置缓存
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 刷新配置缓存
      tags:
      - 系统配置
  /api/v1/system-config/reset-all:
    post:
      consumes:
      - application/json
      description: 将所有配置项重置为系统默认值
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 重置所有配置为默认值
      tags:
      - 系统配置
  /api/v1/system-config/type/{type}:
    get:
      consumes:
      - application/json
      description: 获取指定类型的所有配置项
      parameters:
      - description: 配置类型 (box/task/model/conversion/video/system)
        in: path
        name: type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 根据类型获取配置
      tags:
      - 系统配置
    put:
      consumes:
      - application/json
      description: 更新指定类型的所有配置项
      parameters:
      - description: 配置类型 (box/task/model/conversion/video/system)
        in: path
        name: type
        required: true
        type: string
      - description: 配置值
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateConfigByTypeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 按类型更新配置
      tags:
      - 系统配置
  /api/v1/tasks:
    get:
      consumes:
      - application/json
      description: 获取任务列表，支持按状态、标签、模型、盒子、优先级等条件筛选和搜索
      parameters:
      - description: 任务状态筛选
        enum:
        - pending
        - running
        - completed
        - failed
        - stopped
        - paused
        in: query
        name: status
        type: string
      - description: 标签筛选，多个标签用逗号分隔
        in: query
        name: tags
        type: string
      - description: 模型键筛选
        in: query
        name: modelKey
        type: string
      - description: 盒子ID筛选
        in: query
        name: boxId
        type: string
      - description: 优先级筛选
        in: query
        name: priority
        type: string
      - description: 关键词搜索（搜索任务ID、RTSP URL等）
        in: query
        name: keyword
        type: string
      - description: RTSP URL筛选关键词
        in: query
        name: rtsp_url
        type: string
      - description: 创建者用户ID
        in: query
        name: created_by
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务列表成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Task'
                  type: array
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务列表
      tags:
      - 任务管理
    post:
      consumes:
      - application/json
      description: 创建一个新的AI推理任务，包含推理配置、ROI设置、输出设置等
      parameters:
      - description: 任务配置信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/controllers.CreateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 任务创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "409":
          description: 任务ID已存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 创建新任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的任务，如果任务正在运行，会先停止任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 任务状态不允许删除
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除任务
      tags:
      - 任务管理
    get:
      consumes:
      - application/json
      description: 根据任务ID或TaskID获取任务的详细信息
      parameters:
      - description: 任务ID（数字ID或TaskID）
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务详情成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务ID不能为空
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务详情
      tags:
      - 任务管理
    put:
      consumes:
      - application/json
      description: 更新指定任务的配置信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      - description: 任务更新信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 任务更新成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 更新任务配置
      tags:
      - 任务管理
  /api/v1/tasks/{id}/compatible-boxes:
    get:
      consumes:
      - application/json
      description: 查找与指定任务兼容的盒子列表，按适配分数排序
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取兼容盒子成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/service.BoxScore'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 查询失败
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取与任务兼容的盒子
      tags:
      - 任务管理
  /api/v1/tasks/{id}/deploy:
    post:
      consumes:
      - application/json
      description: 将任务部署到指定的AI盒子上执行，创建部署任务进行管理
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      - description: 部署配置
        in: body
        name: deploy
        required: true
        schema:
          $ref: '#/definitions/controllers.DeployTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 任务下发成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 下发任务到指定盒子
      tags:
      - 任务管理
  /api/v1/tasks/{id}/logs:
    get:
      consumes:
      - application/json
      description: 获取指定任务的执行日志
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务日志成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务日志
      tags:
      - 任务管理
  /api/v1/tasks/{id}/pause:
    post:
      consumes:
      - application/json
      description: 暂停正在运行的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务暂停成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务状态不允许暂停
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 暂停任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}/progress:
    put:
      consumes:
      - application/json
      description: 更新指定任务的执行进度
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      - description: 进度信息
        in: body
        name: progress
        required: true
        schema:
          additionalProperties:
            format: float64
            type: number
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 任务进度更新成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 更新任务进度
      tags:
      - 任务管理
  /api/v1/tasks/{id}/results:
    get:
      consumes:
      - application/json
      description: 获取指定任务的执行结果统计信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务结果成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.TaskResultsResponse'
              type: object
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务结果
      tags:
      - 任务管理
  /api/v1/tasks/{id}/resume:
    post:
      consumes:
      - application/json
      description: 恢复已暂停的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务恢复成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务状态不允许恢复
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 恢复任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}/retry:
    post:
      consumes:
      - application/json
      description: 重新执行失败的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务重试成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务不可重试
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 重试任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}/schedule:
    post:
      consumes:
      - application/json
      description: 将指定任务调度到最合适的盒子
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 任务调度成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.TaskScheduleResult'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 调度失败
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 调度指定任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}/sse:
    get:
      consumes:
      - text/event-stream
      description: 代理访问盒子上任务的SSE图像流，如果任务未部署到盒子则返回错误
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE流数据
          schema:
            type: string
        "400":
          description: 任务未部署到盒子
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务SSE图像流
      tags:
      - 任务管理
  /api/v1/tasks/{id}/start:
    post:
      consumes:
      - application/json
      description: 启动指定的任务，任务状态必须为pending或paused，如果任务已部署到盒子，会同时启动盒子上的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务启动成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务状态不允许启动
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 启动任务
      tags:
      - 任务管理
  /api/v1/tasks/{id}/status:
    get:
      consumes:
      - application/json
      description: 获取指定任务的当前状态信息，包括在盒子上的运行状态
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务状态成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.TaskStatusResponse'
              type: object
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务状态
      tags:
      - 任务管理
  /api/v1/tasks/{id}/stop:
    post:
      consumes:
      - application/json
      description: 停止指定的任务，任务状态必须为running或paused，如果任务已部署到盒子，会先停止盒子上的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务停止成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Task'
              type: object
        "400":
          description: 任务状态不允许停止
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 停止任务
      tags:
      - 任务管理
  /api/v1/tasks/affinity:
    get:
      consumes:
      - application/json
      description: 根据提供的亲和性标签查找匹配的任务
      parameters:
      - description: 亲和性标签，多个标签用逗号分隔
        in: query
        name: tags
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 查找任务成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Task'
                  type: array
              type: object
        "400":
          description: 标签参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 根据亲和性标签查找任务
      tags:
      - 任务管理
  /api/v1/tasks/auto-schedule:
    get:
      consumes:
      - application/json
      description: 获取所有启用了自动调度的待执行任务
      parameters:
      - default: 10
        description: 限制返回数量
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取自动调度任务成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Task'
                  type: array
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取启用自动调度的任务
      tags:
      - 任务管理
  /api/v1/tasks/batch/delete:
    post:
      consumes:
      - application/json
      description: 批量删除多个任务，如果任务正在运行会先停止
      parameters:
      - description: 批量操作请求
        in: body
        name: batch
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchOperationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 批量删除完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BatchOperationResponse'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 批量删除任务
      tags:
      - 任务管理
  /api/v1/tasks/batch/deploy:
    post:
      consumes:
      - application/json
      description: 创建批量部署任务，异步将多个任务部署到指定的AI盒子上执行
      parameters:
      - description: 批量部署配置
        in: body
        name: batch
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchDeployRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 批量部署任务创建成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 批量下发任务（异步）
      tags:
      - 任务管理
  /api/v1/tasks/batch/start:
    post:
      consumes:
      - application/json
      description: 批量启动多个任务
      parameters:
      - description: 批量操作请求
        in: body
        name: batch
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchOperationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 批量启动完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BatchOperationResponse'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 批量启动任务
      tags:
      - 任务管理
  /api/v1/tasks/batch/stop:
    post:
      consumes:
      - application/json
      description: 批量停止多个任务
      parameters:
      - description: 批量操作请求
        in: body
        name: batch
        required: true
        schema:
          $ref: '#/definitions/controllers.BatchOperationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 批量停止完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.BatchOperationResponse'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 批量停止任务
      tags:
      - 任务管理
  /api/v1/tasks/box/{boxId}/compatible:
    get:
      consumes:
      - application/json
      description: 根据盒子ID获取与该盒子兼容的任务（基于亲和性标签）
      parameters:
      - description: 盒子ID
        in: path
        name: boxId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取兼容任务成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Task'
                  type: array
              type: object
        "400":
          description: 盒子ID格式错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取指定盒子兼容的任务
      tags:
      - 任务管理
  /api/v1/tasks/schedule/auto:
    post:
      consumes:
      - application/json
      description: 触发一次自动调度，将启用自动调度的任务分配到合适的盒子
      produces:
      - application/json
      responses:
        "200":
          description: 自动调度完成
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ScheduleResult'
              type: object
        "500":
          description: 调度失败
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 触发自动调度
      tags:
      - 任务管理
  /api/v1/tasks/statistics:
    get:
      consumes:
      - application/json
      description: 获取各种状态的任务数量统计信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务统计成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务统计信息
      tags:
      - 任务管理
  /api/v1/tasks/tags:
    get:
      consumes:
      - application/json
      description: 获取系统中所有已使用的任务标签列表
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务标签成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取所有任务标签
      tags:
      - 任务管理
  /api/v1/upgrade-packages:
    get:
      description: 获取升级包列表，支持分页和筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: size
        type: integer
      - description: 包类型
        in: query
        name: type
        type: string
      - description: 状态
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/controllers.UpgradePackageResponse'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取升级包列表
      tags:
      - 升级包管理
    post:
      consumes:
      - application/json
      description: 创建新的升级包
      parameters:
      - description: 升级包信息
        in: body
        name: packageData
        required: true
        schema:
          $ref: '#/definitions/controllers.UpgradePackageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradePackageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 创建升级包
      tags:
      - 升级包管理
  /api/v1/upgrade-packages/{id}:
    delete:
      description: 删除指定的升级包及其关联文件
      parameters:
      - description: 升级包ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除升级包
      tags:
      - 升级包管理
    get:
      description: 根据ID获取升级包详情
      parameters:
      - description: 升级包ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradePackageResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取升级包详情
      tags:
      - 升级包管理
  /api/v1/upgrade-packages/{id}/download/{file_type}:
    get:
      description: 下载指定升级包的指定类型文件
      parameters:
      - description: 升级包ID
        in: path
        name: id
        required: true
        type: integer
      - description: 文件类型
        enum:
        - backend_program
        - frontend_ui
        in: path
        name: file_type
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 下载升级包文件
      tags:
      - 升级包管理
  /api/v1/upgrade-packages/{id}/status:
    put:
      consumes:
      - application/json
      description: 更新升级包状态（如设置为就绪、失败等）
      parameters:
      - description: 升级包ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态更新
        in: body
        name: status
        required: true
        schema:
          properties:
            status:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradePackageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 更新升级包状态
      tags:
      - 升级包管理
  /api/v1/upgrade-packages/{id}/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传后台程序或前台界面文件到指定升级包
      parameters:
      - description: 升级包ID
        in: path
        name: id
        required: true
        type: integer
      - description: 文件类型
        enum:
        - backend_program
        - frontend_ui
        in: formData
        name: file_type
        required: true
        type: string
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradePackageResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 上传文件到升级包
      tags:
      - 升级包管理
  /api/v1/upgrade-packages/statistics:
    get:
      description: 获取升级包的统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取升级包统计信息
      tags:
      - 升级包管理
  /api/v1/upgrades:
    get:
      description: 获取升级任务列表，支持筛选和分页
      parameters:
      - description: 盒子ID
        in: query
        name: box_id
        type: integer
      - description: 任务状态
        enum:
        - pending
        - running
        - completed
        - failed
        - cancelled
        in: query
        name: status
        type: string
      - description: 目标版本号
        in: query
        name: version_to
        type: string
      - description: 源版本号
        in: query
        name: version_from
        type: string
      - description: 任务名称搜索关键词
        in: query
        name: name
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/controllers.UpgradeTaskResponse'
                  type: array
              type: object
      summary: 获取升级任务列表
      tags:
      - 升级管理
  /api/v1/upgrades/{id}:
    delete:
      description: 删除指定的升级任务记录
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 删除升级任务
      tags:
      - 升级管理
    get:
      description: 获取指定升级任务的详细信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.UpgradeTaskResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取升级任务详情
      tags:
      - 升级管理
  /api/v1/upgrades/{id}/cancel:
    post:
      description: 取消指定的升级任务（仅限待执行或执行中的任务）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 取消升级任务
      tags:
      - 升级管理
  /api/v1/upgrades/{id}/retry:
    post:
      description: 重试失败的升级任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 重试升级任务
      tags:
      - 升级管理
  /api/v1/video/extract-frames/{frame_id}/image:
    get:
      consumes:
      - application/json
      description: 直接返回指定抽帧的图片文件内容
      parameters:
      - description: 抽帧ID
        in: path
        name: frame_id
        required: true
        type: integer
      produces:
      - image/*
      responses:
        "200":
          description: 图片文件
          schema:
            type: file
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 抽帧不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取抽帧图片文件
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-frames/{frame_id}/info:
    get:
      consumes:
      - application/json
      description: 获取指定抽帧的图片信息（不返回图片内容）
      parameters:
      - description: 抽帧ID
        in: path
        name: frame_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.FrameImageInfo'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 抽帧不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取抽帧图片信息
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks:
    get:
      consumes:
      - application/json
      description: 分页获取抽帧任务列表，支持状态、数据源等条件筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务状态
        enum:
        - pending
        - extracting
        - completed
        - stopped
        - failed
        in: query
        name: status
        type: string
      - description: 视频源ID
        in: query
        name: video_source_id
        type: integer
      - description: 视频文件ID
        in: query
        name: video_file_id
        type: integer
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 任务名称搜索关键词
        in: query
        name: name
        type: string
      - description: 任务ID或描述搜索关键词
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ExtractTask'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取抽帧任务列表
      tags:
      - 抽帧任务管理
    post:
      consumes:
      - application/json
      description: 创建视频抽帧任务，支持从视频源或视频文件抽帧
      parameters:
      - description: 抽帧任务创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.CreateExtractTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ExtractTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 创建抽帧任务
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的抽帧任务及其相关数据
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除抽帧任务
      tags:
      - 抽帧任务管理
    get:
      consumes:
      - application/json
      description: 根据ID获取抽帧任务的详细信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.ExtractTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取抽帧任务详情
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks/{id}/download:
    get:
      consumes:
      - application/json
      description: 将指定抽帧任务的所有图片压缩为zip包下载
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/zip
      responses:
        "200":
          description: 压缩包文件
          schema:
            type: file
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 下载任务的所有抽帧图片
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks/{id}/frames:
    get:
      consumes:
      - application/json
      description: 获取指定任务的抽帧结果列表
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.ExtractFrame'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取任务的抽帧结果
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks/{id}/start:
    post:
      consumes:
      - application/json
      description: 启动指定的抽帧任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 启动成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 启动抽帧任务
      tags:
      - 抽帧任务管理
  /api/v1/video/extract-tasks/{id}/stop:
    post:
      consumes:
      - application/json
      description: 停止指定的抽帧任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 停止成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 停止抽帧任务
      tags:
      - 抽帧任务管理
  /api/v1/video/files:
    get:
      consumes:
      - application/json
      description: 分页获取视频文件列表，支持多条件搜索
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 文件状态
        enum:
        - uploading
        - processing
        - ready
        - failed
        in: query
        name: status
        type: string
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 文件名称搜索关键词
        in: query
        name: name
        type: string
      - description: 文件格式筛选
        enum:
        - mp4
        - avi
        - mov
        - mkv
        in: query
        name: format
        type: string
      - description: 关键词搜索（搜索文件名、描述等）
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/controllers.PaginatedResponse'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/models.VideoFile'
                        type: array
                    type: object
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取视频文件列表
      tags:
      - 视频文件管理
  /api/v1/video/files/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的视频文件
      parameters:
      - description: 视频文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除视频文件
      tags:
      - 视频文件管理
    get:
      consumes:
      - application/json
      description: 根据ID获取视频文件详细信息
      parameters:
      - description: 视频文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoFile'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取视频文件详情
      tags:
      - 视频文件管理
    put:
      consumes:
      - application/json
      description: 更新视频文件的基本信息
      parameters:
      - description: 视频文件ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.UpdateVideoFileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoFile'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 更新视频文件信息
      tags:
      - 视频文件管理
  /api/v1/video/files/{id}/convert:
    post:
      consumes:
      - application/json
      description: 将视频文件转换为MP4格式
      parameters:
      - description: 视频文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 转换启动成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 转换视频文件
      tags:
      - 视频文件管理
  /api/v1/video/files/{id}/download:
    get:
      description: 下载指定的视频文件
      parameters:
      - description: 视频文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: 视频文件
          schema:
            type: file
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 下载视频文件
      tags:
      - 视频文件管理
  /api/v1/video/files/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传视频文件到系统
      parameters:
      - description: 视频文件
        in: formData
        name: file
        required: true
        type: file
      - description: 文件名称
        in: formData
        name: name
        required: true
        type: string
      - description: 文件描述
        in: formData
        name: description
        type: string
      - description: 用户ID
        in: formData
        name: user_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoFile'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 上传视频文件
      tags:
      - 视频文件管理
  /api/v1/video/record-tasks:
    get:
      consumes:
      - application/json
      description: 分页获取录制任务列表，支持状态、视频源等条件筛选
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务状态
        enum:
        - pending
        - recording
        - completed
        - stopped
        - failed
        in: query
        name: status
        type: string
      - description: 视频源ID
        in: query
        name: video_source_id
        type: integer
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 任务名称搜索关键词
        in: query
        name: name
        type: string
      - description: 任务ID或描述搜索关键词
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.PaginatedResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.RecordTask'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取录制任务列表
      tags:
      - 录制任务管理
    post:
      consumes:
      - application/json
      description: 创建视频录制任务，仅支持实时视频流录制
      parameters:
      - description: 录制任务创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.CreateRecordTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.RecordTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 创建录制任务
      tags:
      - 录制任务管理
  /api/v1/video/record-tasks/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的录制任务及其相关数据
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除录制任务
      tags:
      - 录制任务管理
    get:
      consumes:
      - application/json
      description: 根据ID获取录制任务的详细信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.RecordTask'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取录制任务详情
      tags:
      - 录制任务管理
  /api/v1/video/record-tasks/{id}/download:
    get:
      consumes:
      - application/json
      description: 下载指定录制任务的录制文件
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: 录制文件
          schema:
            type: file
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在或文件不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 下载录制文件
      tags:
      - 录制任务管理
  /api/v1/video/record-tasks/{id}/start:
    post:
      consumes:
      - application/json
      description: 启动指定的录制任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 启动成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 启动录制任务
      tags:
      - 录制任务管理
  /api/v1/video/record-tasks/{id}/stop:
    post:
      consumes:
      - application/json
      description: 停止指定的录制任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 停止成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 停止录制任务
      tags:
      - 录制任务管理
  /api/v1/video/record-tasks/statistics:
    get:
      consumes:
      - application/json
      description: 获取录制任务的统计信息，包括各状态的任务数量
      parameters:
      - description: 用户ID，不指定则统计所有用户
        in: query
        name: user_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.RecordTaskStatistics'
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取录制任务统计信息
      tags:
      - 录制任务管理
  /api/v1/video/sources:
    get:
      consumes:
      - application/json
      description: 分页获取视频源列表，支持按名称和类型搜索
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 视频源名称搜索关键词
        in: query
        name: name
        type: string
      - description: 视频源类型
        enum:
        - file
        - stream
        - camera
        in: query
        name: type
        type: string
      - description: 视频源状态
        enum:
        - active
        - inactive
        - error
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/controllers.PaginatedResponse'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/models.VideoSource'
                        type: array
                    type: object
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取视频源列表
      tags:
      - 视频源管理
    post:
      consumes:
      - application/json
      description: 创建新的视频源
      parameters:
      - description: 创建请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.CreateVideoSourceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoSource'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 创建视频源
      tags:
      - 视频源管理
  /api/v1/video/sources/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定的视频源
      parameters:
      - description: 视频源ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频源不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 删除视频源
      tags:
      - 视频源管理
    get:
      consumes:
      - application/json
      description: 根据ID获取视频源详细信息
      parameters:
      - description: 视频源ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoSource'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频源不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 获取视频源详情
      tags:
      - 视频源管理
    put:
      consumes:
      - application/json
      description: 更新视频源信息
      parameters:
      - description: 视频源ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.UpdateVideoSourceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.VideoSource'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频源不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 更新视频源
      tags:
      - 视频源管理
  /api/v1/video/sources/{id}/screenshot:
    post:
      consumes:
      - application/json
      description: 对指定视频源进行截图，返回base64编码的jpg图片
      parameters:
      - description: 视频源ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 截图成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.ScreenshotResponse'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "404":
          description: 视频源不存在
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/controllers.APIResponse'
      summary: 视频源截图
      tags:
      - 视频源管理
  /api/v1/video/sources/monitoring/start:
    post:
      description: 手动启动视频源监控服务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 启动视频源监控
      tags:
      - 视频源管理
  /api/v1/video/sources/monitoring/status:
    get:
      description: 获取视频源监控服务的当前状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 获取视频源监控状态
      tags:
      - 视频源管理
  /api/v1/video/sources/monitoring/stop:
    post:
      description: 手动停止视频源监控服务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      summary: 停止视频源监控
      tags:
      - 视频源管理
  /health:
    get:
      description: 检查服务健康状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.HealthResponse'
      summary: 健康检查
      tags:
      - 系统
  /monitoring/boxes/{id}/metrics:
    get:
      consumes:
      - application/json
      description: 获取指定盒子的详细监控指标，包括硬件状态、资源使用等信息
      parameters:
      - description: 盒子ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取盒子指标成功
          schema:
            $ref: '#/definitions/controllers.APIResponse'
        "400":
          description: 缺少盒子ID参数或无效的盒子ID
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 刷新盒子状态失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取指定盒子的监控指标
      tags:
      - 监控管理
  /monitoring/health-check:
    get:
      consumes:
      - application/json
      description: 检查系统各个服务的健康状态，包括监控服务、任务执行器、视频监控等
      produces:
      - application/json
      responses:
        "200":
          description: 健康检查成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.HealthCheckResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 系统健康检查
      tags:
      - 监控管理
  /monitoring/logs:
    get:
      consumes:
      - application/json
      description: 获取系统运行日志，支持按级别、来源、时间等条件过滤
      parameters:
      - description: 日志级别过滤 (debug, info, warn, error, fatal)
        in: query
        name: level
        type: string
      - description: 日志来源过滤 (box_monitoring_service, task_executor_service, etc.)
        in: query
        name: source
        type: string
      - description: 来源ID过滤
        in: query
        name: source_id
        type: string
      - description: 用户ID过滤
        in: query
        name: user_id
        type: integer
      - description: 请求ID过滤
        in: query
        name: request_id
        type: string
      - description: 开始时间 (RFC3339格式)
        in: query
        name: start_time
        type: string
      - description: 结束时间 (RFC3339格式)
        in: query
        name: end_time
        type: string
      - description: 关键词搜索
        in: query
        name: keyword
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 100
        description: 每页大小
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取系统日志成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/service.GetLogsResponse'
              type: object
        "500":
          description: 获取系统日志失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取系统日志
      tags:
      - 监控管理
  /monitoring/logs/statistics:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内的日志统计信息，包括按级别、来源、时间的统计
      parameters:
      - default: '"24小时前"'
        description: 开始时间 (RFC3339格式)
        in: query
        name: start_time
        type: string
      - default: '"当前时间"'
        description: 结束时间 (RFC3339格式)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取日志统计成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.LogStatisticsResponse'
              type: object
        "500":
          description: 获取日志统计失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取日志统计信息
      tags:
      - 监控管理
  /monitoring/metrics:
    get:
      consumes:
      - application/json
      description: 获取系统监控的详细指标数据，包括盒子状态、任务统计、资源使用等监控数据
      produces:
      - application/json
      responses:
        "200":
          description: 获取系统指标成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.MonitoringMetricsResponse'
              type: object
        "500":
          description: 监控服务未初始化
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取系统指标
      tags:
      - 监控管理
  /monitoring/overview:
    get:
      consumes:
      - application/json
      description: 获取整个系统的概览信息，包括盒子状态、任务统计、模型信息、视频处理、系统性能和服务状态等
      produces:
      - application/json
      responses:
        "200":
          description: 获取系统概览成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.SystemOverviewResponse'
              type: object
        "500":
          description: 服务未初始化或内部错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取系统概览
      tags:
      - 监控管理
  /monitoring/performance:
    get:
      consumes:
      - application/json
      description: 获取系统性能相关的指标数据，包括执行器状态、系统资源使用情况等
      produces:
      - application/json
      responses:
        "200":
          description: 获取性能指标成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.PerformanceMetricsResponse'
              type: object
        "500":
          description: 获取系统概览失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取性能指标
      tags:
      - 监控管理
  /monitoring/resource-usage:
    get:
      consumes:
      - application/json
      description: 获取系统资源使用情况统计，包括内存使用、协程数量、响应时间等系统资源指标
      produces:
      - application/json
      responses:
        "200":
          description: 获取资源使用情况成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.ResourceUsageResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 获取系统资源使用情况
      tags:
      - 监控管理
  /monitoring/tasks/metrics:
    get:
      consumes:
      - application/json
      description: 获取任务相关的统计指标，包括转换任务和录制任务的统计信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取任务指标成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.TaskMetricsResponse'
              type: object
        "500":
          description: 获取转换统计失败或获取录制统计失败
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取任务相关的监控指标
      tags:
      - 监控管理
  /monitoring/topn:
    get:
      consumes:
      - application/json
      description: 根据指定的监控指标获取排名前N的盒子列表，支持CPU使用率、TPU使用率、内存使用率、温度、负载等指标
      parameters:
      - description: 指标名称
        enum:
        - cpu_usage
        - tpu_usage
        - memory_usage
        - temperature
        - load
        - load5
        - load15
        - disk_usage
        - npu_memory
        - swap_usage
        - io_read
        - io_write
        - net_recv
        - net_sent
        - procs
        in: query
        name: metric
        required: true
        type: string
      - default: 10
        description: 返回数量，默认10
        in: query
        name: "n"
        type: integer
      - default: desc
        description: 排序方式：desc(降序), asc(升序)
        enum:
        - desc
        - asc
        in: query
        name: order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取TopN指标成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.TopNMetricsResponse'
              type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
        "500":
          description: 服务未初始化或内部错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取指标TopN排序的盒子列表
      tags:
      - 监控管理
  /monitoring/topn/all:
    get:
      consumes:
      - application/json
      description: 一次性获取CPU、TPU、内存、温度、负载等主要指标的TopN排名
      parameters:
      - default: 10
        description: 返回数量，默认10
        in: query
        name: "n"
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取所有指标TopN成功
          schema:
            allOf:
            - $ref: '#/definitions/controllers.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/controllers.AllMetricsTopNResponse'
              type: object
        "500":
          description: 服务未初始化或内部错误
          schema:
            $ref: '#/definitions/controllers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: 获取所有主要指标的TopN排名
      tags:
      - 监控管理
  /ready:
    get:
      description: 检查服务是否就绪
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/controllers.HealthResponse'
      summary: 就绪检查
      tags:
      - 系统
swagger: "2.0"
